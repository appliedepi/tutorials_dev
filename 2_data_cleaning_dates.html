<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />
<meta name="learnr-version-prerender" content="0.10.1.9019" />

<title>Data cleaning</title>

<!-- header-includes START -->
<!-- header-includes END -->
<!-- HEAD_CONTENT -->

<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>


<!-- taken from https://github.com/rstudio/rmarkdown/blob/de8a9c38618903627ca509f5401d50a0876079f7/inst/rmd/h/default.html#L293-L343 -->
<!-- tabsets -->
<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>
<!-- end tabsets -->


</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<!-- Add JavaScript code for making the exercise code larger -->
<script language="JavaScript" src="js/exercise-font-size.js"></script>
<table>
<tr>
<td colspan="3">
<span id="login_message" class="shiny-text-output">
</td>
</tr>
<tr>
<td>
ID:
</td>
<td>
<input id="userID" type="text" class="form-control" value=""/>
</td>
<td>
     Password:
</td>
<td>
<input id="password" type="password" class="form-control" value="" />
</td>
<td>
     <button id="flush" type="button" class="btn btn-default action-button">Submit your work</button>
</td>
<td>
</td>
</tr>
<tr>
<td>
</td>
<td>
<div id="download" class="shiny-html-output">
<div>
</td>
</tr>
</table>
<div id="section-introduction-to-r-for-applied-epidemiology-and-public-health" class="section level2">
<h2>Introduction to R for Applied Epidemiology and Public Health</h2>
<div id="section-data-cleaning-and-core-functions" class="section level3">
<h3>Data cleaning and core functions</h3>
<p><img src="images/moz-banner.png" width="100%" /></p>
</div>
<div id="section-welcome" class="section level3">
<h3>Welcome</h3>
<p>Welcome to the course “Introduction to R for applied epidemiologists”, offered for free by <a href="www.appliedepi.org">Applied Epi</a> - a non-profit organisation that offers open-source tools, training, and support to frontline public health practitioners.</p>
<p>This interactive tutorial focuses on <strong>cleaning of datasets often encountered by applied epidemiologists and public health practitioners</strong>, such as outbreak linelists, surveillance, and laboratory data.</p>
<div id="section-target-audience" class="section level4">
<h4>Target Audience</h4>
<p>This course is designed with the following objectives:</p>
<ul>
<li>To be friendly to people who have never used a programming language before</li>
<li>To teach R emphasizing examples, datasets, and challenges commonly faced by applied epidemiologists</li>
<li>To be modular - so that you can skip to section most relevant to you</li>
</ul>
<p>If this is your first introduction to R programming, please consider first completing our [R Setup and Data Import tutorial], which introduces R, RStudio, R projects, R code syntax, and explains how to import a dataset into R.</p>
</div>
<div id="section-other-languages" class="section level4">
<h4>Other languages</h4>
<p>This course is available…</p>
</div>
<div id="section-offline-online" class="section level4">
<h4>Offline / Online</h4>
<p>You can access this tutorial offline by downloading our R package … If viewing offline, you can view the videos by doing …</p>
</div>
<div id="section-learning-goals" class="section level4">
<h4>Learning goals</h4>
<p>In this tutorial you will learn and practice:</p>
<ul>
<li>Using the pipe operator (<code>%&gt;%</code>) to pass the dataset from one cleaning function to another</li>
<li>The core <strong>tidyverse</strong> R functions used to reduce, clean, and modify dataframes<br />
</li>
<li>How to manipulate dates in order to clean and translate between units of time (days/months/years) with the <strong>lubridate</strong> package</li>
<li>The use of descriptive analysis and summary statistics with the <strong>janitor</strong> package in order to summarize your data</li>
</ul>
<p>This tutorial adapts the <a href="https://epirhandbook.com/en/cleaning-data-and-core-functions.html">Data cleaning and core functions</a> section of our free <a href="https://epirhandbook.com/en/">Epidemiologist R Handbook</a>, which is available for use offline as well.</p>
</div>
<div id="section-data-consent" class="section level4">
<h4>Data consent</h4>
<p>We continually improve these tutorials by collecting your entries and submitted answers to the quiz questions. By continuing, you consent to this collection and use.</p>
<p>To continue anonymously… do XYZ.</p>
</div>
<div id="section-who-made-this-course" class="section level4">
<h4>Who made this course</h4>
<p>This course is designed by epidemiologists with decades of ground-level experience in outbreak response and local public health work.</p>
<p><img src="images/hex-sidebyside.png" width="50%" /></p>
</div>
</div>
</div>
<div id="section-data-used-and-directory-structure" class="section level2">
<h2>Data used and directory structure</h2>
<p>In this tutorial we will use the following datasets. Please take a few minutes to review the structure and content of each dataset before continuing.</p>
<p>Use the arrows on the right to scroll through hidden columns. Note that these are “raw” (messy) datasets that mimic problems commonly found in real-life epidemiological datasets.</p>
<div id="section-a-linelist-of-cases-in-a-fictional-not-real-ebola-outbreak" class="section level3">
<h3><strong>A “linelist” of cases in a fictional (not real) Ebola outbreak</strong></h3>
<p>A “linelist” is a term used in applied epidemiology to refer to a table that contains key information about each case or suspect case in an outbreak. Each row represents one case, and the columns contain variables such as age, sex, date of symptom onset, outcomes, etc.</p>
<p>This dataset contains 6611 rows and 28 columns. Below are the first 5 rows:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["case_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["generation"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["infection date"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["date onset"],"name":[4],"type":["chr"],"align":["left"]},{"label":["hosp date"],"name":[5],"type":["dttm"],"align":["right"]},{"label":["date_of_outcome"],"name":[6],"type":["dttm"],"align":["right"]},{"label":["outcome"],"name":[7],"type":["chr"],"align":["left"]},{"label":["gender"],"name":[8],"type":["chr"],"align":["left"]},{"label":["hospital"],"name":[9],"type":["chr"],"align":["left"]},{"label":["lon"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["lat"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["infector"],"name":[12],"type":["chr"],"align":["left"]},{"label":["source"],"name":[13],"type":["chr"],"align":["left"]},{"label":["age"],"name":[14],"type":["chr"],"align":["left"]},{"label":["age_unit"],"name":[15],"type":["chr"],"align":["left"]},{"label":["row_num"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["wt_kg"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["ht_cm"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["ct_blood"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["fever"],"name":[20],"type":["chr"],"align":["left"]},{"label":["chills"],"name":[21],"type":["chr"],"align":["left"]},{"label":["cough"],"name":[22],"type":["chr"],"align":["left"]},{"label":["aches"],"name":[23],"type":["chr"],"align":["left"]},{"label":["vomit"],"name":[24],"type":["chr"],"align":["left"]},{"label":["temp"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["time_admission"],"name":[26],"type":["chr"],"align":["left"]},{"label":["merged_header"],"name":[27],"type":["chr"],"align":["left"]},{"label":["...28"],"name":[28],"type":["chr"],"align":["left"]}],"data":[{"1":"5fe599","2":"4","3":"2014-05-08","4":"2014-05-13","5":"2014-05-15","6":"<NA>","7":"NA","8":"m","9":"Other","10":"-13.21574","11":"8.468973","12":"f547d6","13":"other","14":"2","15":"years","16":"1","17":"27","18":"48","19":"22","20":"no","21":"no","22":"yes","23":"no","24":"yes","25":"36.8","26":"NA","27":"a","28":"b","_rn_":"1"},{"1":"8689b7","2":"4","3":"<NA>","4":"2014-05-13","5":"2014-05-14","6":"2014-05-18","7":"Recover","8":"f","9":"NA","10":"-13.21523","11":"8.451719","12":"NA","13":"NA","14":"3","15":"years","16":"2","17":"25","18":"59","19":"22","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"36.9","26":"09:36","27":"a","28":"b","_rn_":"2"},{"1":"11f8ea","2":"2","3":"<NA>","4":"2014-05-16","5":"2014-05-18","6":"2014-05-30","7":"Recover","8":"m","9":"St. Mark's Maternity Hospital (SMMH)","10":"-13.21291","11":"8.464817","12":"NA","13":"NA","14":"56","15":"years","16":"3","17":"91","18":"238","19":"21","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"36.9","26":"16:48","27":"a","28":"b","_rn_":"3"},{"1":"b8812a","2":"3","3":"2014-05-04","4":"2014-05-18","5":"2014-05-20","6":"<NA>","7":"NA","8":"f","9":"Port Hospital","10":"-13.23637","11":"8.475476","12":"f90f5f","13":"other","14":"18","15":"years","16":"4","17":"41","18":"135","19":"23","20":"no","21":"no","22":"no","23":"no","24":"no","25":"36.8","26":"11:22","27":"a","28":"b","_rn_":"4"},{"1":"893f25","2":"3","3":"2014-05-18","4":"2014-05-21","5":"2014-05-22","6":"2014-05-29","7":"Recover","8":"m","9":"Military Hospital","10":"-13.22286","11":"8.460824","12":"11f8ea","13":"other","14":"3","15":"years","16":"5","17":"36","18":"71","19":"23","20":"no","21":"no","22":"yes","23":"no","24":"yes","25":"36.9","26":"12:60","27":"a","28":"b","_rn_":"5"},{"1":"be99c8","2":"3","3":"2014-05-03","4":"2014-05-22","5":"2014-05-23","6":"2014-05-24","7":"Recover","8":"f","9":"Port Hospital","10":"-13.22263","11":"8.461831","12":"aec8ec","13":"other","14":"16","15":"years","16":"6","17":"56","18":"116","19":"21","20":"no","21":"no","22":"yes","23":"no","24":"yes","25":"37.6","26":"14:13","27":"a","28":"b","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Click to <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_raw.xlsx">download the <strong>raw</strong> dataset</a> for your own practice.</p>
<p>Click to <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds">download the <strong>clean</strong> dataset as an <strong>.rds file</strong></a> for your own practice. A <em>.rds file</em> is an R-specific file type that preserves column classes. This ensures you will have only minimal cleaning to do after importing the data into R.</p>
</div>
<div id="section-aggregated-data-from-malaria-surveillance-in-a-fictional-country" class="section level3">
<h3><strong>Aggregated data from malaria surveillance in a fictional country</strong></h3>
<p>Aggregated data in epidemiology usually means a table of counts for each facility, or district, etc. Sometimes, the counts can also be per day, week, or month.</p>
<p>In this fictional dataset, each facility reported <em>daily</em> case counts of rapid-test (RDT)-confirmed malaria. Thus, each row represents the number of cases for a specific facility on a specific day.</p>
<p>This dataset contains 3038 rows and 10 columns. Below are the first 5 rows:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["location_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["data_date"],"name":[2],"type":["date"],"align":["right"]},{"label":["submitted_date"],"name":[3],"type":["date"],"align":["right"]},{"label":["Province"],"name":[4],"type":["chr"],"align":["left"]},{"label":["District"],"name":[5],"type":["chr"],"align":["left"]},{"label":["malaria_rdt_0-4"],"name":[6],"type":["int"],"align":["right"]},{"label":["malaria_rdt_5-14"],"name":[7],"type":["int"],"align":["right"]},{"label":["malaria_rdt_15"],"name":[8],"type":["int"],"align":["right"]},{"label":["malaria_tot"],"name":[9],"type":["int"],"align":["right"]},{"label":["newid"],"name":[10],"type":["int"],"align":["right"]}],"data":[{"1":"Facility 1","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Spring","6":"11","7":"12","8":"23","9":"46","10":"1"},{"1":"Facility 2","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Bolo","6":"11","7":"10","8":"5","9":"26","10":"2"},{"1":"Facility 3","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Dingo","6":"8","7":"5","8":"5","9":"18","10":"3"},{"1":"Facility 4","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Bolo","6":"16","7":"16","8":"17","9":"49","10":"4"},{"1":"Facility 5","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Bolo","6":"9","7":"2","8":"6","9":"17","10":"5"},{"1":"Facility 6","2":"2020-08-11","3":"2020-08-12","4":"North","5":"Dingo","6":"3","7":"1","8":"4","9":"8","10":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Click to <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/malaria_facility_count_data.rds">download the <strong>clean</strong> malaria counts dataset as an <strong>.rds file</strong></a> for your own practice. A <em>.rds file</em> is an R-specific file type that preserves column classes. This ensures you will have only minimal cleaning to do after importing the data into R.</p>
</div>
<div id="section-directory-structure" class="section level3">
<h3>Directory structure</h3>
<p>Photo or GIF of directory structure</p>
</div>
<div id="section-accessing-example-data" class="section level3">
<h3>Accessing example data</h3>
<p>Here is how to access the example data</p>
</div>
<div id="section-tidy-data" class="section level3">
<h3>Tidy Data</h3>
<p>We highly recommend doing our tutorial on Tidy Data in Applied Epidemiology. Collecting, formatting, and preparing your dataset <em>before</em> importing it into R is a critical step! LINK VIDEO TEASER</p>
</div>
</div>
<div id="section-packages" class="section level2">
<h2>Install and Load R packages</h2>
<p>To use basic functions with public health data, the tidyverse metapackage is very useful. Tidyverse loads the dplyr, ggplot2, and other packages that are useful in epi data analysis.</p>
<p>We’ve preloaded the below packages for now. Installation and loading of these packages is described on the EpiRHandbook <a href="https://epirhandbook.com/en/suggested-packages-1.html"><em>Suggested Packages</em></a> page.</p>
<p>In this assignment we’ll work with X R packages, let’s load them!</p>
<div class="tutorial-exercise" data-label="load-package" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>pacman::p_load(___)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="load-package-hint" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>pacman::p_load(rio, here, janitor, tidyverse)</code></pre>
</div>
<div id="section-recommended-r-packages-for-public-health" class="section level3">
<h3>Recommended R packages for public health</h3>
<p>See this Epi R Handbook LINK for our recommended packages.</p>
</div>
</div>
<div id="section-import" class="section level2">
<h2>Import data</h2>
<p><a href="https://www.epirhandbook.com/en/import-and-export.html" class="uri">https://www.epirhandbook.com/en/import-and-export.html</a> Import that data and save it as “raw” file</p>
<p>To import data from a sub-folder, the <code>import()</code> command should be modified so that it correctly tells R where to search for this file. This is done using the here() function.</p>
<pre class="r"><code>linelist_raw &lt;- import(here(&quot;data&quot;, &quot;linelist_raw.xlsx&quot;))   # import data and save as named object</code></pre>
</div>
<div id="section-dates" class="section level2">
<h2>Dates</h2>
<p>Working with dates in R requires more attention than any other object class. Below, we offer some tools and example to make this process less painful. Luckily, dates can be wrangled easily with practice, and with a set of helpful packages such as lubridate.</p>
<p>Upon import of raw data, R often interprets dates as character objects - this means they cannot be used for general date operations such as making time series and calculating time intervals. To make matters more difficult, there are many ways a date can be formatted and you must help R know which part of a date represents what (month, day, hour, etc.).</p>
<p>Dates in R are their own class of object - the Date class. It should be noted that there is also a class that stores objects with date and time. Date time objects are formally referred to as <code>POSIXt</code>, <code>POSIXct</code>, and/or <code>POSIXlt</code> classes (the difference isn’t important). These objects are informally referred to as datetime classes.</p>
<ul>
<li>It is important to make R recognize when a column contains dates.</li>
<li>Dates are an object class and can be tricky to work with.</li>
<li>Here we present several ways to convert date columns to Date class.</li>
</ul>
<p><strong>Current date</strong> To get the current “system” date you using <code>Sys.Date()</code>, and to get the time, <code>Sys.time()</code>. Alternatively you can return the date with <code>today()</code> and the time with <code>now()</code> from the <strong>lubridate</strong> package.</p>
<p>Try it out now, type <code>Sys.Date()</code> and <code>today()</code> on different lines and click submit.</p>
<div class="tutorial-exercise" data-label="today_date" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="today_date-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>Sys.Date()
today()</code></pre>
</div>
</div>
<div id="section-converting-to-a-date" class="section level2">
<h2>Converting to a date</h2>
<p>After importing a dataset into R, date column values may look like “1989/12/30”, “05/06/2014” or “13 Jan 2020”. In all these cases, R is likely still treating these as character values. <strong>R must be told that these are dates, and the format that the dates are in (which is Day, Month and Year).</strong></p>
<p>By default, the values of class Date are displayed as YYYY-MM-DD, later in this section we will discuss how to change these.</p>
<div id="section-base-r" class="section level3">
<h3><strong>base R</strong></h3>
<p><code>as.Date()</code> is the <strong>base R</strong> function to convert an object or column to class Date. This requires:</p>
<ul>
<li>You specifiy the existing format of the raw character date</li>
<li>If used on a character column all values must have the same exact format (if this is not the case try <code>guess_dates()</code> from the <strong>linelist</strong> package)</li>
</ul>
<p><em>First</em>, check the class of your column with <code>class()</code> from <strong>base R</strong>. <em>Second</em>, within the <code>as.Date()</code> function, use the <code>format =</code> argument to tell R the current format of the character date.</p>
<pre class="r"><code># Convert to class date
linelist &lt;- linelist %&gt;% 
  mutate(date_onset = as.Date(date_onset, format = &quot;%d/%m/%Y&quot;))</code></pre>
<p>Most of the strptime abbreviations are listed below. You can see the complete list by running ?strptime.</p>
<ul>
<li>%d = Day number of month (5, 17, 28, etc.)</li>
<li>%j = Day number of the year (Julian day 001-366)</li>
<li>%a = Abbreviated weekday (Mon, Tue, Wed, etc.)</li>
<li>%A = Full weekday (Monday, Tuesday, etc.) %w = Weekday number (0-6, Sunday is 0)</li>
<li>%u = Weekday number (1-7, Monday is 1)</li>
<li>%W = Week number (00-53, Monday is week start)</li>
<li>%U = Week number (01-53, Sunday is week start)</li>
<li>%m = Month number (e.g. 01, 02, 03, 04)</li>
<li>%b = Abbreviated month (Jan, Feb, etc.)</li>
<li>%B = Full month (January, February, etc.)</li>
<li>%y = 2-digit year (e.g. 89)</li>
<li>%Y = 4-digit year (e.g. 1989)</li>
<li>%h = hours (24-hr clock)</li>
<li>%m = minutes</li>
<li>%s = seconds %z = offset from GMT</li>
<li>%Z = Time zone (character)</li>
</ul>
<p><em>Remember that you need to also get the date separator (/, -, space etc) correct in order to convert your dates</em> ### lubridate</p>
<p>The <strong>lubridate</strong> package makes handling dates and times a lot easier than using <strong>base R</strong>, and is recommended whenever you are working with dates</p>
<p>**lubridate* has several helper functions designed to convert character objects to dates in a more intuitive and lenient way. These functions are specific to the rough date format, but allow for a variety of separators, and synonyms for dates (e.g. 01 vs Jan vs January) - they are named after abbreviations of date formats.</p>
<p>The <code>ymd()</code> function converts date values supplied as year, month, day. 2020-10-11 2020-10-11 The <code>mdy()</code> does the same but in the order of month, day, year. 2020-10-11 and the <code>dmy()</code> in the format as day, month , year 2020-10-11</p>
<p>Within a pipe chain, it may look like this</p>
<pre class="r"><code>linelist &lt;- linelist %&gt;%
  mutate(date_onset = lubridate::ymd(date_onset))</code></pre>
<p>You can then check the conversion has applied correctly by using <code>class()</code>.</p>
<p>Note that the above functions work best with 4-digit years. 2-digit years can produce unexpected results, as lubridate attempts to guess the century.</p>
<p>To convert a 2-digit year into a 4-digit year (all in the same century) you can convert to class character and then combine the existing digits with a pre-fix using str_glue() from the <strong>stringr</strong> package (see Characters and strings). Then convert to date.</p>
<pre class="r"><code>two_digit_years &lt;- c(&quot;15&quot;, &quot;15&quot;, &quot;16&quot;, &quot;17&quot;)
str_glue(&quot;20{two_digit_years}&quot;)</code></pre>
<pre><code>## 2015
## 2015
## 2016
## 2017</code></pre>
<p>How would you use to convert all columns that containe <code>date_</code> to a year, month, day Date class?</p>
<div class="tutorial-exercise" data-label="date_first" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="date_first-hint" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>A more compact way of doing this would be to use a tidyselect helper function such as across(). See earlier exercises where we converted columns to as.Character().</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="date_first-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>linelist %&gt;%
  mutate(across(.cols = contains(&quot;date_&quot;), .fns = lubridate::ymd))</code></pre>
</div>
</div>
<div id="section-combine-columns" class="section level3">
<h3>Combine columns</h3>
<p>You can use the <strong>lubridate</strong> functions <code>make_date()</code> and <code>make_datetime()</code> to combine multiple numeric columns in one date column. For example, if you have the numeric columns <code>onset_day</code>, <code>onset_month</code> and <code>onset_year</code> in the dataframe <code>linelist</code></p>
<pre class="r"><code>linelist &lt;- linelist %&gt;% 
  mutate(onset_date = make_date(year = year(date_onset), month = month(date_onset), day = day(date_onset)))</code></pre>
<div class="panel panel-default">
<div data-label="rhetorical1" class="tutorial-question panel-body">
<div id="rhetorical1-answer_container" class="shiny-html-output"></div>
<div id="rhetorical1-message_container" class="shiny-html-output"></div>
<div id="rhetorical1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
</div>
<div id="section-excel-dates" class="section level2">
<h2>Excel dates</h2>
<p>In the background, most software store dates as numbers. R stores dates from an origin of 1st January, 1970. Thus, if you run <code>as.numeric(as.Date("1970-01-01))</code> you will get <code>0</code>.</p>
<p>Microsoft Excel stores dates with an origin of either December 30, 1899 (Windows) or January 1, 1904 (Mac), depending on your operating system. See this Microsoft guidance for more information.</p>
<p>Excel dates often import into R as these numeric values instead of as characters. If the dataset you imported from Excel shows dates as numbers or characters like “41369”… use <code>as.Date()</code> (or <strong>lubridate</strong>’s <code>as_date()</code> function) to convert, but instead of supplying a “format” as above, supply the Excel origin date to the argument <code>origin =.</code></p>
<p>This will not work if the Excel date is stored in R as a character type, so be sure to ensure the number is class Numeric!</p>
<p>NOTE: You should provide the origin date in R’s default date format (“YYYY-MM-DD”).</p>
<pre class="r"><code># An example of providing the Excel &#39;origin date&#39; when converting Excel number dates
data_cleaned &lt;- linelist %&gt;% 
  mutate(date_onset = as.numeric(date_onset)) %&gt;%   # ensure class is numeric
  mutate(date_onset = as.Date(date_onset, origin = &quot;1899-12-30&quot;)) # convert to date using Excel origin</code></pre>
</div>
<div id="section-messy-dates" class="section level2">
<h2>Messy dates</h2>
<p>Often dates are in a variety of different formats, the function <code>guess_dates()</code> from the <strong>linelist</strong> package attempts to read these and convert them to a standard format.</p>
<p>For example <code>guess_dates()</code> would see a vector of the following character dates “03 Jan 2018”, “07/03/1982”, and “08/20/85” and convert them to class Date as: <code>2018-01-03</code>, <code>1982-03-07</code>, and <code>1985-08-20</code>.</p>
<pre class="r"><code>linelist::guess_dates(c(&quot;03 Jan 2018&quot;,
                        &quot;07/03/1982&quot;,
                        &quot;08/20/85&quot;))</code></pre>
<pre><code>## [1] &quot;2018-01-03&quot; &quot;1982-03-07&quot; &quot;1985-08-20&quot;</code></pre>
</div>
<div id="section-working-with-the-date-time-class" class="section level2">
<h2>Working with the date-time class</h2>
<p>Converting columns to the date-time class follows a similar format to the date class with <strong>lubridate</strong> functions, only with <code>_h</code> (only hours supplied), <code>_hm</code> (hours and minutes supplied), or <code>_hms</code> (hours, minutes, and seconds supplied) appended to the end (e.g. <code>dmy_hms()</code>).</p>
<pre class="r"><code>ymd_h(&quot;2020-01-01 16hrs&quot;)</code></pre>
<pre><code>## [1] &quot;2020-01-01 16:00:00 UTC&quot;</code></pre>
<pre class="r"><code>ymd_h(&quot;2020-01-01 4PM&quot;)</code></pre>
<pre><code>## [1] &quot;2020-01-01 16:00:00 UTC&quot;</code></pre>
<pre class="r"><code>dmy_hm(&quot;01 January 2020 16:20&quot;)</code></pre>
<pre><code>## [1] &quot;2020-01-01 16:20:00 UTC&quot;</code></pre>
<pre class="r"><code>mdy_hms(&quot;01 January 2020, 16:20:40&quot;)</code></pre>
<pre><code>## [1] &quot;2020-01-20 16:20:40 UTC&quot;</code></pre>
<p>When working with a dataframe, time and date columns can be combined to create a datetime column using <code>str_glue()</code> from <strong>stringr</strong> package and an appropriate <strong>lubridate</strong> function.</p>
<p>In this example, the linelist dataframe has a column in format “hours:minutes”. To convert this to a datetime we follow a few steps:</p>
<ul>
<li>Create a “clean” time of admission column with missing values filled-in with the column median. We do this because lubridate won’t operate on missing values.</li>
<li>Combine it with the column date_hospitalisation, and then use the function ymd_hm() to convert.</li>
</ul>
<pre class="r"><code># time_admission is a column in hours:minutes
linelist &lt;- linelist %&gt;%
  
  # when time of admission is not given, assign the median admission time
  mutate(
    time_admission_clean = ifelse(
      is.na(time_admission),         # if time is missing
      median(time_admission),        # assign the median
      time_admission                 # if not missing keep as is
  )) %&gt;%
  
    # use str_glue() to combine date and time columns to create one character column
    # and then use ymd_hm() to convert it to datetime
  mutate(
    date_time_of_admission = str_glue(&quot;{date_hospitalisation} {time_admission_clean}&quot;) %&gt;% 
      ymd_hm()
  )</code></pre>
<p>Can you order these functions in increasing order by the time they output? For example <code>ymd_h("2020-01-01 16")</code> would output “2020-01-01 16:00:00 UTC” which is before the output of <code>ymd_hm("2020-01-01 16.05")</code> which would output “2020-01-01 16:05:00 UTC” and so would be placed before.</p>
<div class="panel panel-default">
<div data-label="sortable_question" class="tutorial-question panel-body">
<div id="sortable_question-answer_container" class="shiny-html-output"></div>
<div id="sortable_question-message_container" class="shiny-html-output"></div>
<div id="sortable_question-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div id="section-convert-times-alone" class="section level3">
<h3>Convert times alone</h3>
<p>If your data only contains character time (hours, minutes, seconds), you can convert and manipulate these as times using <code>strptime()</code> from <strong>base R</strong>. For example, to get the difference between these two times:</p>
<pre class="r"><code># raw character times
time1 &lt;- &quot;13:45&quot; 
time2 &lt;- &quot;15:20&quot;

# Times converted to a datetime class
time1_clean &lt;- strptime(time1, format = &quot;%H:%M&quot;)
time2_clean &lt;- strptime(time2, format = &quot;%H:%M&quot;)

# Difference is of class &quot;difftime&quot; by default, here converted to numeric hours 
as.numeric(time2_clean - time1_clean)   # difference in hours</code></pre>
<pre><code>## [1] 1.583333</code></pre>
</div>
<div id="section-extract-time" class="section level3">
<h3>Extract time</h3>
<p>You can extract the elements of a time with <code>hour()</code>, <code>minute()</code> and <code>second()</code> from <strong>lubridate</strong>.</p>
<p>Here is an example of extracting the hour, and then classifing by part of the day. We begin with the column <code>time_admission</code>, which is class Character in format “HH:MM”. First, the <code>strptime()</code> is used as described above to convert the characters to datetime class. Then, the hour is extracted with <code>hour()</code>, returning a number from 0-24. Finally, a column time_period is created using logic with <code>case_when()</code> to classify rows into Morning/Afternoon/Evening/Night based on their hour of admission.</p>
<pre class="r"><code>linelist &lt;- linelist %&gt;%
  mutate(hour_admit = hour(strptime(time_admission, format = &quot;%H:%M&quot;))) %&gt;%
  mutate(time_period = case_when(
    hour_admit &gt; 06 &amp; hour_admit &lt; 12 ~ &quot;Morning&quot;,
    hour_admit &gt;= 12 &amp; hour_admit &lt; 17 ~ &quot;Afternoon&quot;,
    hour_admit &gt;= 17 &amp; hour_admit &lt; 21 ~ &quot;Evening&quot;,
    hour_admit &gt;=21 | hour_admit &lt;= 6 ~ &quot;Night&quot;))</code></pre>
</div>
<div id="section-practice" class="section level3">
<h3>Practice</h3>
<p><div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div></p>
<div class="panel panel-default">
<div data-label="quiz6-1" class="tutorial-question panel-body">
<div id="quiz6-1-answer_container" class="shiny-html-output"></div>
<div id="quiz6-1-message_container" class="shiny-html-output"></div>
<div id="quiz6-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default">
<div data-label="quiz6-2" class="tutorial-question panel-body">
<div id="quiz6-2-answer_container" class="shiny-html-output"></div>
<div id="quiz6-2-message_container" class="shiny-html-output"></div>
<div id="quiz6-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>We want to estimate the time from infection to onset. In order to do this, can you convert the columns <code>date_infection</code> and <code>date_onset</code> to Date objects, and then subtract <code>date_infection</code> from <code>date_onset</code> to create a new column, <code>time_to_symptoms</code>, and display only this column?</p>
<div class="tutorial-exercise" data-label="date_convert_subtract" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="date_convert_subtract-hint" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>After converting the values from character class to Date, you can simply subtract the columns within mutate</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="date_convert_subtract-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>linelist &lt;- linelist %&gt;%
  mutate(date_infection = ymd(date_infection),
         date_onset = ymd(date_onset),
         time_to_symptoms = date_onset - date_infection) %&gt;%
  select(time_to_symptoms)</code></pre>
</div>
</div>
</div>
<div id="section-working-with-dates" class="section level2">
<h2>Working with dates</h2>
<p>Once converted you can extract aspects such as the year, month, day, weekday, week etc.</p>
<p>3 3 5</p>
<p>You can also extract time components from a datetime object or column. This can be useful if you want to view the distribution of admission times.</p>
<p>15 12 44.4886341</p>
<div id="section-date-math" class="section level3">
<h3>Date math</h3>
<p>Date math is simple once you have converted the dates, to add on a certain number of days, weeks, months or years you can use the functions <code>days()</code>, <code>weeks()</code>, <code>months()</code>, <code>years()</code>.</p>
<p>2022-03-06 2022-06-03 2025-03-03</p>
<p>and again the same for adding on time</p>
<p>2022-03-03 18:12:44 2022-03-03 15:15:44 2022-03-03 15:12:47</p>
</div>
<div id="section-date-intervals" class="section level3">
<h3>Date intervals</h3>
<p>The differences between dates can be calculated by</p>
<ul>
<li>Ensuring both dates are of class dates</li>
<li>Use subtraction to return the difftime difference between two dates</li>
<li>If necessary, convert to numeric class to perform subsequent calculations</li>
</ul>
<pre class="r"><code>output &lt;- Sys.Date() - ymd(&quot;2020-02-20&quot;)
output    # print</code></pre>
<pre><code>## Time difference of 742 days</code></pre>
<pre class="r"><code>class(output)</code></pre>
<pre><code>## [1] &quot;difftime&quot;</code></pre>
<p>To do subsequent operations on a “difftime”, convert it to numeric with <code>as.numeric()</code>.</p>
<p>This can all be brought together to work with data - for example:</p>
<pre class="r"><code>linelist_delay &lt;- linelist %&gt;%
  
  # convert date of onset from character to date objects by specifying ymd format
  mutate(date_onset = ymd(date_onset),
         date_hospitalisation = ymd(date_hospitalisation)) %&gt;%
  
  # filter out all cases without onset in march
  filter(month(date_onset) == 3) %&gt;%
    
  # find the difference in days between onset and hospitalisation
  mutate(days_onset_to_hosp = date_hospitalisation - date_onset)

# calculate the median number of days to hospitalisation for all cases where data are available
median(linelist_delay$days_onset_to_hosp, na.rm = T)</code></pre>
<pre><code>## Time difference of 1 days</code></pre>
</div>
</div>
<div id="section-date-display" class="section level2">
<h2>Date display</h2>
<p>Once dates are the correct class, you often want them to display differently, for example to display as “Monday 05 January” instead of “2018-01-05”. You may also want to adjust the display in order to then group rows by the date elements displayed - for example to group by month-year.</p>
<div id="section-format" class="section level3">
<h3><code>format()</code></h3>
<p>Adjust date display with the <strong>base R</strong> function format(). This function accepts a character string (in quotes) specifying the desired output format in the “%” strptime abbreviations (the same syntax as used in as.Date()). Below are most of the common abbreviations.</p>
<ul>
<li>%d = Day number of month (5, 17, 28, etc.)</li>
<li>%j = Day number of the year (Julian day 001-366)</li>
<li>%a = Abbreviated weekday (Mon, Tue, Wed, etc.)</li>
<li>%A = Full weekday (Monday, Tuesday, etc.) %w = Weekday number (0-6, Sunday is 0)</li>
<li>%u = Weekday number (1-7, Monday is 1)</li>
<li>%W = Week number (00-53, Monday is week start)</li>
<li>%U = Week number (01-53, Sunday is week start)</li>
<li>%m = Month number (e.g. 01, 02, 03, 04)</li>
<li>%b = Abbreviated month (Jan, Feb, etc.)</li>
<li>%B = Full month (January, February, etc.)</li>
<li>%y = 2-digit year (e.g. 89)</li>
<li>%Y = 4-digit year (e.g. 1989)</li>
<li>%h = hours (24-hr clock)</li>
<li>%m = minutes</li>
<li>%s = seconds %z = offset from GMT</li>
<li>%Z = Time zone (character)</li>
</ul>
</div>
<div id="section-month-year" class="section level3">
<h3>Month-Year</h3>
<p>To convert a Date column to Month-year format, we suggest you use the function <code>as.yearmon()</code> from the <strong>zoo</strong> package. This converts the date to class “yearmon” and retains the proper ordering. In contrast, using <code>format(column, "%Y %B")</code> will convert to class Character and will order the values alphabetically (incorrectly).</p>
<p>Below, a new column <code>yearmonth</code> is created from the column date_onset, using the <code>as.yearmon()</code> function. The default (correct) ordering of the resulting values are shown in the table.</p>
<pre><code>## 
## Apr 2014 May 2014 Jun 2014 Jul 2014 Aug 2014 Sep 2014 Oct 2014 Nov 2014 
##        7       64      100      226      528     1070     1112      763 
## Dec 2014 Jan 2015 Feb 2015 Mar 2015 Apr 2015 
##      562      431      306      277      186</code></pre>
<p>In contrast, you can see how only using <code>format()</code> does achieve the desired display format, but not the correct ordering.</p>
<pre><code>## 
## Apr 2014 Apr 2015 Aug 2014 Dec 2014 Feb 2015 Jan 2015 Jul 2014 Jun 2014 
##        7      186      528      562      306      431      226      100 
## Mar 2015 May 2014 Nov 2014 Oct 2014 Sep 2014 
##      277       64      763     1112     1070</code></pre>
</div>
</div>
<div id="section-epidemiological-weeks" class="section level2">
<h2>Epidemiological weeks</h2>
<p><strong>lubridate</strong></p>
<p>We generally recommend using the <code>floor_date()</code> function from <strong>lubridate</strong>, with the argument <code>unit = "week"</code>. This rounds the date down to the “start” of the week, as defined by the argument <code>week_start =</code>. The default week start is 1 (for Mondays) but you can specify any day of the week as the start (e.g. 7 for Sundays). <code>floor_date()</code> is versatile and can be used to round down to other time units by setting unit = to “second”, “minute”, “hour”, “day”, “month”, or “year”.</p>
<p>Which of these uses of <code>floor_date()</code> will result in rounding the date to the start of the week as a Thursday?</p>
<p>The returned value is the start date of the week, in Date class. Date class is useful when plotting the data, as it will be easily recognized and ordered correctly by <code>ggplot()</code>.</p>
<p>If you are only interested in adjusting dates to display by week in a plot, see the section in this page on Date display. For example when plotting an epicurve you can format the date display by providing the desired <code>strptime</code> “%” nomenclature. For example, use “%Y-%W” or “%Y-%U” to return the year and week number (given Monday or Sunday week start, respectively).</p>
<div id="section-weekly-counts" class="section level3">
<h3>Weekly counts</h3>
<p>For example, to work out the weekly cases we carry out the following operations:</p>
<ol style="list-style-type: decimal">
<li>Create a new ‘week’ column with <code>mutate()</code>, using <code>floor_date()</code> with <code>unit = "week"</code></li>
<li>Get counts of rows (cases) per week with <code>count()</code>; filter out any cases with missing date</li>
<li>Finish with <code>complete()</code> from <strong>tidyr</strong> to ensure that all weeks appear in the data - even those with no rows/cases. By default the count values for any “new” rows are NA, but you can make them 0 with the <code>fill = argument</code>, which expects a named list (below, <code>n</code> is the name of the counts column).</li>
</ol>
<pre class="r"><code># Make aggregated dataset of weekly case counts
weekly_counts &lt;- linelist %&gt;% 
  drop_na(date_onset) %&gt;%             # remove cases missing onset date
  mutate(weekly_cases = floor_date(   # make new column, week of onset
    date_onset,
    unit = &quot;week&quot;)) %&gt;%            
  count(weekly_cases) %&gt;%           # group data by week and count rows per group (creates column &#39;n&#39;)
  tidyr::complete(                  # ensure all weeks are present, even those with no cases reported
    weekly_cases = seq.Date(          # re-define the &quot;weekly_cases&quot; column as a complete sequence,
      from = min(weekly_cases),       # from the minimum date
      to = max(weekly_cases),         # to the maxiumum date
      by = &quot;week&quot;),                   # by weeks
    fill = list(n = 0)) %&gt;%             # fill-in NAs in the n counts column with 0
  head()                            #Display the top 6 entries</code></pre>
<p><div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div></p>
<div class="panel panel-default">
<div data-label="quiz8-1" class="tutorial-question panel-body">
<div id="quiz8-1-answer_container" class="shiny-html-output"></div>
<div id="quiz8-1-message_container" class="shiny-html-output"></div>
<div id="quiz8-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default">
<div data-label="quiz8-2" class="tutorial-question panel-body">
<div id="quiz8-2-answer_container" class="shiny-html-output"></div>
<div id="quiz8-2-message_container" class="shiny-html-output"></div>
<div id="quiz8-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-epiweek-alternatives" class="section level3">
<h3>Epiweek alternatives</h3>
<p>Note that <strong>lubridate</strong> also has functions <code>week()</code>, <code>epiweek()</code>, and <code>isoweek()</code>, each of which has slightly different start dates and other nuances. Generally speaking though, <code>floor_date()</code> should be all that you need. Read the details for these functions by entering ?week into the console.</p>
<p>Now imagine we want to create create a new variable, <code>week_of_infection</code>, that has the epiweek of <code>date_infection</code>. However, many of these dates are unknown (<code>NA</code> values). We had previously calculated the value <code>time_to_symptoms</code> by subtracting <code>date_infection</code> from <code>date_onset</code> and so we can use the median value of this to come up with a crude replacement for the date of infection.</p>
<p>Can you do the following:</p>
<ol style="list-style-type: decimal">
<li>Create a new column called <code>estimated_or_recorded</code> which if the value of <code>date_infection</code> is <code>NA</code> it will be “estimated” or “recorded” if it is not.</li>
<li>If the column <code>estimated_or_recorded</code> has the value “estimated”, then we will use subtract the <code>median(time_to_symptoms)</code> from <code>date_onset</code> to fill in the NA value in a new column <code>date_infection_updated</code></li>
<li>Convert <code>date_infection_updated</code> to the epiweek in a new column <code>week_infection</code>.</li>
</ol>
<div class="tutorial-exercise" data-label="epiweek_convert" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>linelist %&gt;%
  drop_na(date_onset) %&gt;%
  mutate(date_infection = ymd(date_infection),
         date_onset = ymd(date_onset),
         time_to_symptoms = as.numeric(date_onset - date_infection)) #Add in additonal arguments within this mutate</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="epiweek_convert-hint" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>You will want to use two if_else() statements before you use the epiweek() function. Remember the order is important!</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="epiweek_convert-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>linelist %&gt;%
  drop_na(date_onset) %&gt;%
  mutate(date_infection = ymd(date_infection),
         date_onset = ymd(date_onset),
         time_to_symptoms = as.numeric(date_onset - date_infection),
         estimated_or_recorded = if_else(
           is.na(date_infection),
           &quot;estimated&quot;,
           &quot;recorded&quot;),
         date_infection_updated = if_else(
           estimated_or_recorded == &quot;estimated&quot;,
           date_onset - days(median(time_to_symptoms, na.rm = T)),
           date_infection
         ),
         week_infection = epiweek(date_infection_updated))</code></pre>
</div>
<p>This could then allow us to plot an epicurve of the <code>week_infection</code>, highlighting the number of estimated and recorded values.</p>
<p><img src="2_data_cleaning_dates_files/figure-html/unnamed-chunk-23-1.png" width="624" /></p>
<p>You might consider using the package <strong>aweek</strong> to set epidemiological weeks. It has the functions <code>date2week()</code> and <code>week2date()</code> in which you can set the week start day with <code>week_start = "Monday"</code>. This package is easiest if you want “week”-style outputs (e.g. “2020-W12”). Another advantage of <strong>aweek</strong> is that when <code>date2week()</code> is applied to a date column, the returned column (week format) is automatically of class Factor and includes levels for all weeks in the time span (this avoids the extra step of <code>complete()</code> described above). However, <strong>aweek</strong> does not have the functionality to round dates to other time units such as months, years, etc.</p>
</div>
</div>
<div id="section-converting-datetime-zones" class="section level2">
<h2>Converting date/time zones</h2>
<p>When data is present in different time time zones, it can often be important to standardise this data in a unified time zone. This can present a further challenge, as the time zone component of data must be coded manually in most cases.</p>
<p>In R, each datetime object has a timezone component. By default, all datetime objects will carry the local time zone for the computer being used - this is generally specific to a location rather than a named timezone, as time zones will often change in locations due to daylight savings time. It is not possible to accurately compensate for time zones without a time component of a date, as the event a date column represents cannot be attributed to a specific time, and therefore time shifts measured in hours cannot be reasonably accounted for.</p>
<p>To deal with time zones, there are a number of helper functions in <strong>lubridate</strong> that can be used to change the time zone of a datetime object from the local time zone to a different time zone. Time zones are set by attributing a valid tz database time zone to the datetime object. A list of these can be found here - if the location you are using data from is not on this list, nearby large cities in the time zone are available and serve the same purpose.</p>
<p><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" class="uri">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></p>
<pre class="r"><code># assign the current time to a column
time_now &lt;- Sys.time()
time_now</code></pre>
<pre><code>## [1] &quot;2022-03-03 15:12:45 GMT&quot;</code></pre>
<pre class="r"><code># use with_tz() to assign a new timezone to the column, while CHANGING the clock time
time_london_real &lt;- with_tz(time_now, &quot;Europe/London&quot;)

# use force_tz() to assign a new timezone to the column, while KEEPING the clock time
time_london_local &lt;- force_tz(time_now, &quot;Europe/London&quot;)

# note that as long as the computer that was used to run this code is NOT set to London time,
# there will be a difference in the times 
# (the number of hours difference from the computers time zone to london)
time_london_real - time_london_local</code></pre>
<pre><code>## Time difference of 0 secs</code></pre>
</div>
<div id="section-lagging-and-leading-calculations" class="section level2">
<h2>Lagging and leading calculations</h2>
<p><code>lead()</code> and <code>lag()</code> are functions from <strong>dplyr</strong> which help find previous (lagged) or subsequent (leading) values in a vector. This is useful when doing calculations of change/difference between time units. For example, the weekly increase in cases.</p>
<p>Let’s say you want to calculate the difference in cases between a current week and the previous one. The data are initially provided in weekly counts as shown below. When using lag() or lead() the order of rows in the dataframe is very important! - pay attention to whether your dates/numbers are ascending or descending</p>
<p>First, create a new column containing the value of the previous (lagged) week.</p>
<ul>
<li>Control the number of units back/forward with n = (must be a non-negative integer)</li>
<li>Use default = to define the value placed in non-existing rows (e.g. the first row for which there is no lagged value). By default this is NA.</li>
<li>Use order_by = TRUE if your the rows are not ordered by your reference column</li>
</ul>
<pre class="r"><code>counts &lt;- weekly_counts %&gt;% 
  mutate(cases_prev_wk = lag(n, n = 1))</code></pre>
<pre class="r"><code>counts %&gt;% 
  mutate(cases_prev_wk = lag(n, n = 1),
         case_diff = n - cases_prev_wk) %&gt;%
  head()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["weekly_cases"],"name":[1],"type":["date"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]},{"label":["cases_prev_wk"],"name":[3],"type":["int"],"align":["right"]},{"label":["case_diff"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"2014-04-06","2":"1","3":"NA","4":"NA"},{"1":"2014-04-13","2":"1","3":"1","4":"0"},{"1":"2014-04-20","2":"4","3":"1","4":"3"},{"1":"2014-04-27","2":"4","3":"4","4":"0"},{"1":"2014-05-04","2":"12","3":"4","4":"8"},{"1":"2014-05-11","2":"14","3":"12","4":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>

<script type="application/shiny-prerendered" data-context="server-start">
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
# load packages ----------------------------------------------------------------
library(learnr)
library(gradethis)
library(tidyverse)
library(here)
library(janitor)
library(rio)
library(basket) # not sure if we need this
library(etude) # helper functions for gradethis
library(epikit)
library(linelist)
library(lubridate)
library(fastLink)
library(sortable)

# set options for exercises and checking ---------------------------------------
gradethis_setup()

learnr::tutorial_options(exercise.timelimit = 60) 
  #exercise.checker = gradethis::grade_learnr) 
    # alternatively, submitr::null_code_checker


# event recorder ---------------------------------------------------------------
# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R
tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises

vfun <- submitr::make_basic_validator(NULL, "hello") #basket::check_valid

new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {
    cat(
      tutorial_id, 
      " (v", tutorial_version, "); ",
      format(Sys.time(), "%Y-%M%-%D %H:%M:%S %Z"), "; ",
      user_id, "; ",
      event, "; ",
      data$label, "; ",
      data$answers, "; ",
      data$code, "; ",
      data$correct, "\n", sep = "",
      
      file = here::here("event_records", "learnr_basics.txt"),
      append = TRUE)
}

options(tutorial.event_recorder = new_recorder)


# hide non-exercise code chunks ------------------------------------------------
knitr::opts_chunk$set(echo = FALSE)


# data prep --------------------------------------------------------------------
linelist_raw <- rio::import(here::here("data", "linelist_raw.xlsx"))
linelist <- rio::import(here::here("data", "linelist_cleaned.rds"))
malaria_counts <- rio::import(here::here("data", "malaria_facility_count_data.rds"))

#Incorrectly assign class so we can clean later
linelist_raw$age <- as.character(linelist_raw$age)
linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)

#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later
set.seed(1)
take_these <- sample(1:nrow(linelist_raw), 500)

linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32

#Create some dummy df's for pivoting exercises
df <- data.frame(id = c("A", "B", "C"),
           obs1_date = c("2021-04-23", "2021-04-23", "2021-04-23"),
           obs1_status = c("Healthy", "Healthy", "Missing"),
           obs2_date = c("2021-04-24", "2021-04-24", "2021-04-24"),
           obs2_status = c("Healthy", "Healthy", "Healthy"),
           obs3_date = c("2021-04-25", "2021-04-25", "2021-04-25"),
           obs3_status = c("Unwell", "Healthy", "Healthy"))

fever_followup <- data.frame(patient = 1:10,
                             observation1_date = Sys.Date() - 21,
                        observation2_date = Sys.Date() - 14,
                        observation3_date = Sys.Date() - 7,
                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),
                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),
                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))

fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, "No fever",
                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, "Mild fever",
                                     ifelse(fever_followup$observation1_date >= 39.4, "High fever", NA)))
fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, "No fever",
                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, "Mild fever",
                                     ifelse(fever_followup$observation2_date >= 39.4, "High fever", NA)))
fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, "No fever",
                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, "Mild fever",
                                     ifelse(fever_followup$observation3_date >= 39.4, "High fever", NA)))


fill_table_1 <- 
  tibble::tribble(
       ~Measurement, ~Facility, ~Cases,
                  1,  "Hosp 1",     66,
                  2,  "Hosp 1",     26,
                  3,  "Hosp 1",      8,
                  1,  "Hosp 2",     71,
                  2,  "Hosp 2",     62,
                  3,  "Hosp 2",     70,
                  1,  "Hosp 3",     47,
                  2,  "Hosp 3",     70,
                  3,  "Hosp 3",     38,
       )

fill_table_2 <- 
  tibble::tribble(
    ~Year, ~Measurement, ~Facility, ~Cases,
     2000,            1,  "Hosp 4",     82,
     2001,            2,  "Hosp 4",     87,
     2002,            3,  "Hosp 4",     46
  )

linelist_mini <- linelist %>%                 # start with original linelist
  select(case_id, date_onset, hospital) %>%   # select columns
  head(10)     

# Make the hospital information dataframe
hosp_info = data.frame(
  hosp_name     = c("central hospital", "military", "military", "port", "St. Mark's", "ignace", "sisters"),
  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),
  level         = c("Tertiary", "Secondary", "Primary", "Secondary", "Secondary", "Primary", "Primary")
)

#Make some ID's and dataframes to join for exercises
patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = "")


patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),
                  linelist %>%
    select(fever:vomit) %>%
    filter(row_number() %in% 1:10))

patient_dates <- data.frame(id = patient_ID,
                  linelist %>%
    select(contains("date")) %>%
    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),
  sample(which(!is.na(linelist$date_onset)), 5))))

#Probablistic matching

# make datasets

cases <- tribble(
  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,
  "M",     "Amir",      NA,          "Khan",       1989,  11,   22,   "River",
  "M",     "Anthony",   "B.",        "Smith",      1970, 09, 19,      "River", 
  "F",     "Marialisa", "Contreras", "Rodrigues",  1972, 04, 15,      "River",
  "F",     "Elizabeth", "Casteel",   "Chase",      1954, 03, 03,      "City",
  "M",     "Jose",      "Sanchez",   "Lopez",      1996, 01, 06,      "City",
  "F",     "Cassidy",   "Jones",      "Davis",     1980, 07, 20,      "City",
  "M",     "Michael",   "Murphy",     "O'Calaghan",1969, 04, 12,      "Rural", 
  "M",     "Oliver",    "Laurent",    "De Bordow" , 1971, 02, 04,     "River",
  "F",      "Blessing",  NA,          "Adebayo",   1955,  02, 14,     "Rural"
)

results <- tribble(
  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,
  "M",      "Amir",     NA,          "Khan",         1989, 11,   22,  "River", "positive",
  "M",      "Tony",   "B",         "Smith",          1970, 09,   19,  "River", "positive",
  "F",      "Maria",    "Contreras", "Rodriguez",    1972, 04,   15,  "Cty",   "negative",
  "F",      "Betty",    "Castel",   "Chase",        1954,  03,   30,  "City",  "positive",
  "F",      "Andrea",   NA,          "Kumaraswamy",  2001, 01,   05,  "Rural", "positive",      
  "F",      "Caroline", NA,          "Wang",         1988, 12,   11,  "Rural", "negative",
  "F",      "Trang",    NA,          "Nguyen",       1981, 06,   10,  "Rural", "positive",
  "M",      "Olivier" , "Laurent",   "De Bordeaux",  NA,   NA,   NA,  "River", "positive",
  "M",      "Mike",     "Murphy",    "O'Callaghan",  1969, 04,   12,  "Rural", "negative",
  "F",      "Cassidy",  "Jones",     "Davis",        1980, 07,   02,  "City",  "positive",
  "M",      "Mohammad", NA,          "Ali",          1942, 01,   17,  "City",  "negative",
  NA,       "Jose",     "Sanchez",   "Lopez",        1995, 01,   06,  "City",  "negative",
  "M",      "Abubakar", NA,          "Abullahi",     1960, 01,   01,  "River", "positive",
  "F",      "Maria",    "Salinas",   "Contreras",    1955, 03,   03,  "River", "positive"
  )


cases_dup <- rbind(cases,
                   data.frame(
                     gender = c("M", "F"),
           first = c("Tony", "Maria"),
           middle = c("B.", "Contreras"),
           last = c("Smith", "Rodriguez"),
           yr = c(1970, 1972),
           mon = c(9, 4),
           day = c(19, 15),
           district = c("River", "River"))
           )

#Create a  factor column
linelist$source[is.na(linelist$source)] <- "missing"
linelist$source <- factor(linelist$source)

</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
# see https://rdrr.io/github/dtkaplan/submitr/f/vignettes/using.Rmd
options(tutorial.storage = "none")
vfun <- submitr::make_basic_validator(NULL, "hello")       #basket::check_valid
storage_actions <- submitr::record_local("./minimal_submissions.csv")
submitr::shiny_logic(input, output, session, vfun,
                     storage_actions)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-load-package-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-load-package-code-editor`)), session)
output$`tutorial-exercise-load-package-output` <- renderUI({
  `tutorial-exercise-load-package-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(global_setup = structure(c("knitr::opts_chunk$set(warning = FALSE, message = FALSE) ", 
"# load packages ----------------------------------------------------------------", 
"library(learnr)", "library(gradethis)", "library(tidyverse)", 
"library(here)", "library(janitor)", "library(rio)", "library(basket) # not sure if we need this", 
"library(etude) # helper functions for gradethis", "library(epikit)", 
"library(linelist)", "library(lubridate)", "library(fastLink)", 
"library(sortable)", "", "# set options for exercises and checking ---------------------------------------", 
"gradethis_setup()", "", "learnr::tutorial_options(exercise.timelimit = 60) ", 
"  #exercise.checker = gradethis::grade_learnr) ", "    # alternatively, submitr::null_code_checker", 
"", "", "# event recorder ---------------------------------------------------------------", 
"# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R", 
"tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises", 
"", "vfun <- submitr::make_basic_validator(NULL, \"hello\") #basket::check_valid", 
"", "new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {", 
"    cat(", "      tutorial_id, ", "      \" (v\", tutorial_version, \"); \",", 
"      format(Sys.time(), \"%Y-%M%-%D %H:%M:%S %Z\"), \"; \",", 
"      user_id, \"; \",", "      event, \"; \",", "      data$label, \"; \",", 
"      data$answers, \"; \",", "      data$code, \"; \",", "      data$correct, \"\\n\", sep = \"\",", 
"      ", "      file = here::here(\"event_records\", \"learnr_basics.txt\"),", 
"      append = TRUE)", "}", "", "options(tutorial.event_recorder = new_recorder)", 
"", "", "# hide non-exercise code chunks ------------------------------------------------", 
"knitr::opts_chunk$set(echo = FALSE)", "", "", "# data prep --------------------------------------------------------------------", 
"linelist_raw <- rio::import(here::here(\"data\", \"linelist_raw.xlsx\"))", 
"linelist <- rio::import(here::here(\"data\", \"linelist_cleaned.rds\"))", 
"malaria_counts <- rio::import(here::here(\"data\", \"malaria_facility_count_data.rds\"))", 
"", "#Incorrectly assign class so we can clean later", "linelist_raw$age <- as.character(linelist_raw$age)", 
"linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)", 
"", "#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later", 
"set.seed(1)", "take_these <- sample(1:nrow(linelist_raw), 500)", 
"", "linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32", 
"", "#Create some dummy df's for pivoting exercises", "df <- data.frame(id = c(\"A\", \"B\", \"C\"),", 
"           obs1_date = c(\"2021-04-23\", \"2021-04-23\", \"2021-04-23\"),", 
"           obs1_status = c(\"Healthy\", \"Healthy\", \"Missing\"),", 
"           obs2_date = c(\"2021-04-24\", \"2021-04-24\", \"2021-04-24\"),", 
"           obs2_status = c(\"Healthy\", \"Healthy\", \"Healthy\"),", 
"           obs3_date = c(\"2021-04-25\", \"2021-04-25\", \"2021-04-25\"),", 
"           obs3_status = c(\"Unwell\", \"Healthy\", \"Healthy\"))", 
"", "fever_followup <- data.frame(patient = 1:10,", "                             observation1_date = Sys.Date() - 21,", 
"                        observation2_date = Sys.Date() - 14,", 
"                        observation3_date = Sys.Date() - 7,", 
"                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))", 
"", "fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation1_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation2_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation3_date >= 39.4, \"High fever\", NA)))", 
"", "", "fill_table_1 <- ", "  tibble::tribble(", "       ~Measurement, ~Facility, ~Cases,", 
"                  1,  \"Hosp 1\",     66,", "                  2,  \"Hosp 1\",     26,", 
"                  3,  \"Hosp 1\",      8,", "                  1,  \"Hosp 2\",     71,", 
"                  2,  \"Hosp 2\",     62,", "                  3,  \"Hosp 2\",     70,", 
"                  1,  \"Hosp 3\",     47,", "                  2,  \"Hosp 3\",     70,", 
"                  3,  \"Hosp 3\",     38,", "       )", "", 
"fill_table_2 <- ", "  tibble::tribble(", "    ~Year, ~Measurement, ~Facility, ~Cases,", 
"     2000,            1,  \"Hosp 4\",     82,", "     2001,            2,  \"Hosp 4\",     87,", 
"     2002,            3,  \"Hosp 4\",     46", "  )", "", "linelist_mini <- linelist %>%                 # start with original linelist", 
"  select(case_id, date_onset, hospital) %>%   # select columns", 
"  head(10)     ", "", "# Make the hospital information dataframe", 
"hosp_info = data.frame(", "  hosp_name     = c(\"central hospital\", \"military\", \"military\", \"port\", \"St. Mark's\", \"ignace\", \"sisters\"),", 
"  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),", 
"  level         = c(\"Tertiary\", \"Secondary\", \"Primary\", \"Secondary\", \"Secondary\", \"Primary\", \"Primary\")", 
")", "", "#Make some ID's and dataframes to join for exercises", 
"patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = \"\")", 
"", "", "patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),", 
"                  linelist %>%", "    select(fever:vomit) %>%", 
"    filter(row_number() %in% 1:10))", "", "patient_dates <- data.frame(id = patient_ID,", 
"                  linelist %>%", "    select(contains(\"date\")) %>%", 
"    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),", 
"  sample(which(!is.na(linelist$date_onset)), 5))))", "", "#Probablistic matching", 
"", "# make datasets", "", "cases <- tribble(", "  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,", 
"  \"M\",     \"Amir\",      NA,          \"Khan\",       1989,  11,   22,   \"River\",", 
"  \"M\",     \"Anthony\",   \"B.\",        \"Smith\",      1970, 09, 19,      \"River\", ", 
"  \"F\",     \"Marialisa\", \"Contreras\", \"Rodrigues\",  1972, 04, 15,      \"River\",", 
"  \"F\",     \"Elizabeth\", \"Casteel\",   \"Chase\",      1954, 03, 03,      \"City\",", 
"  \"M\",     \"Jose\",      \"Sanchez\",   \"Lopez\",      1996, 01, 06,      \"City\",", 
"  \"F\",     \"Cassidy\",   \"Jones\",      \"Davis\",     1980, 07, 20,      \"City\",", 
"  \"M\",     \"Michael\",   \"Murphy\",     \"O'Calaghan\",1969, 04, 12,      \"Rural\", ", 
"  \"M\",     \"Oliver\",    \"Laurent\",    \"De Bordow\" , 1971, 02, 04,     \"River\",", 
"  \"F\",      \"Blessing\",  NA,          \"Adebayo\",   1955,  02, 14,     \"Rural\"", 
")", "", "results <- tribble(", "  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,", 
"  \"M\",      \"Amir\",     NA,          \"Khan\",         1989, 11,   22,  \"River\", \"positive\",", 
"  \"M\",      \"Tony\",   \"B\",         \"Smith\",          1970, 09,   19,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Contreras\", \"Rodriguez\",    1972, 04,   15,  \"Cty\",   \"negative\",", 
"  \"F\",      \"Betty\",    \"Castel\",   \"Chase\",        1954,  03,   30,  \"City\",  \"positive\",", 
"  \"F\",      \"Andrea\",   NA,          \"Kumaraswamy\",  2001, 01,   05,  \"Rural\", \"positive\",      ", 
"  \"F\",      \"Caroline\", NA,          \"Wang\",         1988, 12,   11,  \"Rural\", \"negative\",", 
"  \"F\",      \"Trang\",    NA,          \"Nguyen\",       1981, 06,   10,  \"Rural\", \"positive\",", 
"  \"M\",      \"Olivier\" , \"Laurent\",   \"De Bordeaux\",  NA,   NA,   NA,  \"River\", \"positive\",", 
"  \"M\",      \"Mike\",     \"Murphy\",    \"O'Callaghan\",  1969, 04,   12,  \"Rural\", \"negative\",", 
"  \"F\",      \"Cassidy\",  \"Jones\",     \"Davis\",        1980, 07,   02,  \"City\",  \"positive\",", 
"  \"M\",      \"Mohammad\", NA,          \"Ali\",          1942, 01,   17,  \"City\",  \"negative\",", 
"  NA,       \"Jose\",     \"Sanchez\",   \"Lopez\",        1995, 01,   06,  \"City\",  \"negative\",", 
"  \"M\",      \"Abubakar\", NA,          \"Abullahi\",     1960, 01,   01,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Salinas\",   \"Contreras\",    1955, 03,   03,  \"River\", \"positive\"", 
"  )", "", "", "cases_dup <- rbind(cases,", "                   data.frame(", 
"                     gender = c(\"M\", \"F\"),", "           first = c(\"Tony\", \"Maria\"),", 
"           middle = c(\"B.\", \"Contreras\"),", "           last = c(\"Smith\", \"Rodriguez\"),", 
"           yr = c(1970, 1972),", "           mon = c(9, 4),", 
"           day = c(19, 15),", "           district = c(\"River\", \"River\"))", 
"           )", "", "#Create a  factor column", "linelist$source[is.na(linelist$source)] <- \"missing\"", 
"linelist$source <- factor(linelist$source)", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "load-package", code = "pacman::p_load(___)", 
        opts = list(label = "\"load-package\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = structure("grade_this_code(\"You are correct, the packages you need for this lesson are now loaded!\")", chunk_opts = list(
        label = "load-package-check")), solution = NULL, test_cases = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "2_data_cleaning_dates_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "2_data_cleaning_dates_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 60, exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, stage = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, stage = stage, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "load-package", exercise = TRUE, 
        code = "pacman::p_load(___)", out.width.px = 624, out.height.px = 384, 
        params.src = "load-package, exercise = TRUE", fig.num = 0, 
        exercise.df_print = "paged"), engine = "r"), class = "tutorial_exercise"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-today_date-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-today_date-code-editor`)), session)
output$`tutorial-exercise-today_date-output` <- renderUI({
  `tutorial-exercise-today_date-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(global_setup = structure(c("knitr::opts_chunk$set(warning = FALSE, message = FALSE) ", 
"# load packages ----------------------------------------------------------------", 
"library(learnr)", "library(gradethis)", "library(tidyverse)", 
"library(here)", "library(janitor)", "library(rio)", "library(basket) # not sure if we need this", 
"library(etude) # helper functions for gradethis", "library(epikit)", 
"library(linelist)", "library(lubridate)", "library(fastLink)", 
"library(sortable)", "", "# set options for exercises and checking ---------------------------------------", 
"gradethis_setup()", "", "learnr::tutorial_options(exercise.timelimit = 60) ", 
"  #exercise.checker = gradethis::grade_learnr) ", "    # alternatively, submitr::null_code_checker", 
"", "", "# event recorder ---------------------------------------------------------------", 
"# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R", 
"tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises", 
"", "vfun <- submitr::make_basic_validator(NULL, \"hello\") #basket::check_valid", 
"", "new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {", 
"    cat(", "      tutorial_id, ", "      \" (v\", tutorial_version, \"); \",", 
"      format(Sys.time(), \"%Y-%M%-%D %H:%M:%S %Z\"), \"; \",", 
"      user_id, \"; \",", "      event, \"; \",", "      data$label, \"; \",", 
"      data$answers, \"; \",", "      data$code, \"; \",", "      data$correct, \"\\n\", sep = \"\",", 
"      ", "      file = here::here(\"event_records\", \"learnr_basics.txt\"),", 
"      append = TRUE)", "}", "", "options(tutorial.event_recorder = new_recorder)", 
"", "", "# hide non-exercise code chunks ------------------------------------------------", 
"knitr::opts_chunk$set(echo = FALSE)", "", "", "# data prep --------------------------------------------------------------------", 
"linelist_raw <- rio::import(here::here(\"data\", \"linelist_raw.xlsx\"))", 
"linelist <- rio::import(here::here(\"data\", \"linelist_cleaned.rds\"))", 
"malaria_counts <- rio::import(here::here(\"data\", \"malaria_facility_count_data.rds\"))", 
"", "#Incorrectly assign class so we can clean later", "linelist_raw$age <- as.character(linelist_raw$age)", 
"linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)", 
"", "#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later", 
"set.seed(1)", "take_these <- sample(1:nrow(linelist_raw), 500)", 
"", "linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32", 
"", "#Create some dummy df's for pivoting exercises", "df <- data.frame(id = c(\"A\", \"B\", \"C\"),", 
"           obs1_date = c(\"2021-04-23\", \"2021-04-23\", \"2021-04-23\"),", 
"           obs1_status = c(\"Healthy\", \"Healthy\", \"Missing\"),", 
"           obs2_date = c(\"2021-04-24\", \"2021-04-24\", \"2021-04-24\"),", 
"           obs2_status = c(\"Healthy\", \"Healthy\", \"Healthy\"),", 
"           obs3_date = c(\"2021-04-25\", \"2021-04-25\", \"2021-04-25\"),", 
"           obs3_status = c(\"Unwell\", \"Healthy\", \"Healthy\"))", 
"", "fever_followup <- data.frame(patient = 1:10,", "                             observation1_date = Sys.Date() - 21,", 
"                        observation2_date = Sys.Date() - 14,", 
"                        observation3_date = Sys.Date() - 7,", 
"                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))", 
"", "fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation1_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation2_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation3_date >= 39.4, \"High fever\", NA)))", 
"", "", "fill_table_1 <- ", "  tibble::tribble(", "       ~Measurement, ~Facility, ~Cases,", 
"                  1,  \"Hosp 1\",     66,", "                  2,  \"Hosp 1\",     26,", 
"                  3,  \"Hosp 1\",      8,", "                  1,  \"Hosp 2\",     71,", 
"                  2,  \"Hosp 2\",     62,", "                  3,  \"Hosp 2\",     70,", 
"                  1,  \"Hosp 3\",     47,", "                  2,  \"Hosp 3\",     70,", 
"                  3,  \"Hosp 3\",     38,", "       )", "", 
"fill_table_2 <- ", "  tibble::tribble(", "    ~Year, ~Measurement, ~Facility, ~Cases,", 
"     2000,            1,  \"Hosp 4\",     82,", "     2001,            2,  \"Hosp 4\",     87,", 
"     2002,            3,  \"Hosp 4\",     46", "  )", "", "linelist_mini <- linelist %>%                 # start with original linelist", 
"  select(case_id, date_onset, hospital) %>%   # select columns", 
"  head(10)     ", "", "# Make the hospital information dataframe", 
"hosp_info = data.frame(", "  hosp_name     = c(\"central hospital\", \"military\", \"military\", \"port\", \"St. Mark's\", \"ignace\", \"sisters\"),", 
"  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),", 
"  level         = c(\"Tertiary\", \"Secondary\", \"Primary\", \"Secondary\", \"Secondary\", \"Primary\", \"Primary\")", 
")", "", "#Make some ID's and dataframes to join for exercises", 
"patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = \"\")", 
"", "", "patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),", 
"                  linelist %>%", "    select(fever:vomit) %>%", 
"    filter(row_number() %in% 1:10))", "", "patient_dates <- data.frame(id = patient_ID,", 
"                  linelist %>%", "    select(contains(\"date\")) %>%", 
"    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),", 
"  sample(which(!is.na(linelist$date_onset)), 5))))", "", "#Probablistic matching", 
"", "# make datasets", "", "cases <- tribble(", "  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,", 
"  \"M\",     \"Amir\",      NA,          \"Khan\",       1989,  11,   22,   \"River\",", 
"  \"M\",     \"Anthony\",   \"B.\",        \"Smith\",      1970, 09, 19,      \"River\", ", 
"  \"F\",     \"Marialisa\", \"Contreras\", \"Rodrigues\",  1972, 04, 15,      \"River\",", 
"  \"F\",     \"Elizabeth\", \"Casteel\",   \"Chase\",      1954, 03, 03,      \"City\",", 
"  \"M\",     \"Jose\",      \"Sanchez\",   \"Lopez\",      1996, 01, 06,      \"City\",", 
"  \"F\",     \"Cassidy\",   \"Jones\",      \"Davis\",     1980, 07, 20,      \"City\",", 
"  \"M\",     \"Michael\",   \"Murphy\",     \"O'Calaghan\",1969, 04, 12,      \"Rural\", ", 
"  \"M\",     \"Oliver\",    \"Laurent\",    \"De Bordow\" , 1971, 02, 04,     \"River\",", 
"  \"F\",      \"Blessing\",  NA,          \"Adebayo\",   1955,  02, 14,     \"Rural\"", 
")", "", "results <- tribble(", "  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,", 
"  \"M\",      \"Amir\",     NA,          \"Khan\",         1989, 11,   22,  \"River\", \"positive\",", 
"  \"M\",      \"Tony\",   \"B\",         \"Smith\",          1970, 09,   19,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Contreras\", \"Rodriguez\",    1972, 04,   15,  \"Cty\",   \"negative\",", 
"  \"F\",      \"Betty\",    \"Castel\",   \"Chase\",        1954,  03,   30,  \"City\",  \"positive\",", 
"  \"F\",      \"Andrea\",   NA,          \"Kumaraswamy\",  2001, 01,   05,  \"Rural\", \"positive\",      ", 
"  \"F\",      \"Caroline\", NA,          \"Wang\",         1988, 12,   11,  \"Rural\", \"negative\",", 
"  \"F\",      \"Trang\",    NA,          \"Nguyen\",       1981, 06,   10,  \"Rural\", \"positive\",", 
"  \"M\",      \"Olivier\" , \"Laurent\",   \"De Bordeaux\",  NA,   NA,   NA,  \"River\", \"positive\",", 
"  \"M\",      \"Mike\",     \"Murphy\",    \"O'Callaghan\",  1969, 04,   12,  \"Rural\", \"negative\",", 
"  \"F\",      \"Cassidy\",  \"Jones\",     \"Davis\",        1980, 07,   02,  \"City\",  \"positive\",", 
"  \"M\",      \"Mohammad\", NA,          \"Ali\",          1942, 01,   17,  \"City\",  \"negative\",", 
"  NA,       \"Jose\",     \"Sanchez\",   \"Lopez\",        1995, 01,   06,  \"City\",  \"negative\",", 
"  \"M\",      \"Abubakar\", NA,          \"Abullahi\",     1960, 01,   01,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Salinas\",   \"Contreras\",    1955, 03,   03,  \"River\", \"positive\"", 
"  )", "", "", "cases_dup <- rbind(cases,", "                   data.frame(", 
"                     gender = c(\"M\", \"F\"),", "           first = c(\"Tony\", \"Maria\"),", 
"           middle = c(\"B.\", \"Contreras\"),", "           last = c(\"Smith\", \"Rodriguez\"),", 
"           yr = c(1970, 1972),", "           mon = c(9, 4),", 
"           day = c(19, 15),", "           district = c(\"River\", \"River\"))", 
"           )", "", "#Create a  factor column", "linelist$source[is.na(linelist$source)] <- \"missing\"", 
"linelist$source <- factor(linelist$source)", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "today_date", code = "", opts = list(label = "\"today_date\"", 
        exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = structure(c("  grade_this({", 
    "    # Automatically pass if .result equal to .solution", 
    "    pass_if_equal()", "    # Default to failing grade with feedback", 
    "    fail(message = \"Remember to type each of the two functions on a separate line. Also remember date Sys.Date() has Date capitalized\")", 
    "  })"), chunk_opts = list(label = "today_date-check")), 
    solution = structure(c("Sys.Date()", "today()"), chunk_opts = list(
        label = "today_date-solution")), test_cases = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "2_data_cleaning_dates_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "2_data_cleaning_dates_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 60, exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, stage = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, stage = stage, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "today_date", exercise = TRUE, 
        code = "", out.width.px = 624, out.height.px = 384, params.src = "today_date, exercise = TRUE", 
        fig.num = 0L, exercise.df_print = "paged"), engine = "r"), class = "tutorial_exercise"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-date_first-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-date_first-code-editor`)), session)
output$`tutorial-exercise-date_first-output` <- renderUI({
  `tutorial-exercise-date_first-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(global_setup = structure(c("knitr::opts_chunk$set(warning = FALSE, message = FALSE) ", 
"# load packages ----------------------------------------------------------------", 
"library(learnr)", "library(gradethis)", "library(tidyverse)", 
"library(here)", "library(janitor)", "library(rio)", "library(basket) # not sure if we need this", 
"library(etude) # helper functions for gradethis", "library(epikit)", 
"library(linelist)", "library(lubridate)", "library(fastLink)", 
"library(sortable)", "", "# set options for exercises and checking ---------------------------------------", 
"gradethis_setup()", "", "learnr::tutorial_options(exercise.timelimit = 60) ", 
"  #exercise.checker = gradethis::grade_learnr) ", "    # alternatively, submitr::null_code_checker", 
"", "", "# event recorder ---------------------------------------------------------------", 
"# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R", 
"tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises", 
"", "vfun <- submitr::make_basic_validator(NULL, \"hello\") #basket::check_valid", 
"", "new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {", 
"    cat(", "      tutorial_id, ", "      \" (v\", tutorial_version, \"); \",", 
"      format(Sys.time(), \"%Y-%M%-%D %H:%M:%S %Z\"), \"; \",", 
"      user_id, \"; \",", "      event, \"; \",", "      data$label, \"; \",", 
"      data$answers, \"; \",", "      data$code, \"; \",", "      data$correct, \"\\n\", sep = \"\",", 
"      ", "      file = here::here(\"event_records\", \"learnr_basics.txt\"),", 
"      append = TRUE)", "}", "", "options(tutorial.event_recorder = new_recorder)", 
"", "", "# hide non-exercise code chunks ------------------------------------------------", 
"knitr::opts_chunk$set(echo = FALSE)", "", "", "# data prep --------------------------------------------------------------------", 
"linelist_raw <- rio::import(here::here(\"data\", \"linelist_raw.xlsx\"))", 
"linelist <- rio::import(here::here(\"data\", \"linelist_cleaned.rds\"))", 
"malaria_counts <- rio::import(here::here(\"data\", \"malaria_facility_count_data.rds\"))", 
"", "#Incorrectly assign class so we can clean later", "linelist_raw$age <- as.character(linelist_raw$age)", 
"linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)", 
"", "#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later", 
"set.seed(1)", "take_these <- sample(1:nrow(linelist_raw), 500)", 
"", "linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32", 
"", "#Create some dummy df's for pivoting exercises", "df <- data.frame(id = c(\"A\", \"B\", \"C\"),", 
"           obs1_date = c(\"2021-04-23\", \"2021-04-23\", \"2021-04-23\"),", 
"           obs1_status = c(\"Healthy\", \"Healthy\", \"Missing\"),", 
"           obs2_date = c(\"2021-04-24\", \"2021-04-24\", \"2021-04-24\"),", 
"           obs2_status = c(\"Healthy\", \"Healthy\", \"Healthy\"),", 
"           obs3_date = c(\"2021-04-25\", \"2021-04-25\", \"2021-04-25\"),", 
"           obs3_status = c(\"Unwell\", \"Healthy\", \"Healthy\"))", 
"", "fever_followup <- data.frame(patient = 1:10,", "                             observation1_date = Sys.Date() - 21,", 
"                        observation2_date = Sys.Date() - 14,", 
"                        observation3_date = Sys.Date() - 7,", 
"                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))", 
"", "fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation1_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation2_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation3_date >= 39.4, \"High fever\", NA)))", 
"", "", "fill_table_1 <- ", "  tibble::tribble(", "       ~Measurement, ~Facility, ~Cases,", 
"                  1,  \"Hosp 1\",     66,", "                  2,  \"Hosp 1\",     26,", 
"                  3,  \"Hosp 1\",      8,", "                  1,  \"Hosp 2\",     71,", 
"                  2,  \"Hosp 2\",     62,", "                  3,  \"Hosp 2\",     70,", 
"                  1,  \"Hosp 3\",     47,", "                  2,  \"Hosp 3\",     70,", 
"                  3,  \"Hosp 3\",     38,", "       )", "", 
"fill_table_2 <- ", "  tibble::tribble(", "    ~Year, ~Measurement, ~Facility, ~Cases,", 
"     2000,            1,  \"Hosp 4\",     82,", "     2001,            2,  \"Hosp 4\",     87,", 
"     2002,            3,  \"Hosp 4\",     46", "  )", "", "linelist_mini <- linelist %>%                 # start with original linelist", 
"  select(case_id, date_onset, hospital) %>%   # select columns", 
"  head(10)     ", "", "# Make the hospital information dataframe", 
"hosp_info = data.frame(", "  hosp_name     = c(\"central hospital\", \"military\", \"military\", \"port\", \"St. Mark's\", \"ignace\", \"sisters\"),", 
"  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),", 
"  level         = c(\"Tertiary\", \"Secondary\", \"Primary\", \"Secondary\", \"Secondary\", \"Primary\", \"Primary\")", 
")", "", "#Make some ID's and dataframes to join for exercises", 
"patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = \"\")", 
"", "", "patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),", 
"                  linelist %>%", "    select(fever:vomit) %>%", 
"    filter(row_number() %in% 1:10))", "", "patient_dates <- data.frame(id = patient_ID,", 
"                  linelist %>%", "    select(contains(\"date\")) %>%", 
"    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),", 
"  sample(which(!is.na(linelist$date_onset)), 5))))", "", "#Probablistic matching", 
"", "# make datasets", "", "cases <- tribble(", "  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,", 
"  \"M\",     \"Amir\",      NA,          \"Khan\",       1989,  11,   22,   \"River\",", 
"  \"M\",     \"Anthony\",   \"B.\",        \"Smith\",      1970, 09, 19,      \"River\", ", 
"  \"F\",     \"Marialisa\", \"Contreras\", \"Rodrigues\",  1972, 04, 15,      \"River\",", 
"  \"F\",     \"Elizabeth\", \"Casteel\",   \"Chase\",      1954, 03, 03,      \"City\",", 
"  \"M\",     \"Jose\",      \"Sanchez\",   \"Lopez\",      1996, 01, 06,      \"City\",", 
"  \"F\",     \"Cassidy\",   \"Jones\",      \"Davis\",     1980, 07, 20,      \"City\",", 
"  \"M\",     \"Michael\",   \"Murphy\",     \"O'Calaghan\",1969, 04, 12,      \"Rural\", ", 
"  \"M\",     \"Oliver\",    \"Laurent\",    \"De Bordow\" , 1971, 02, 04,     \"River\",", 
"  \"F\",      \"Blessing\",  NA,          \"Adebayo\",   1955,  02, 14,     \"Rural\"", 
")", "", "results <- tribble(", "  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,", 
"  \"M\",      \"Amir\",     NA,          \"Khan\",         1989, 11,   22,  \"River\", \"positive\",", 
"  \"M\",      \"Tony\",   \"B\",         \"Smith\",          1970, 09,   19,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Contreras\", \"Rodriguez\",    1972, 04,   15,  \"Cty\",   \"negative\",", 
"  \"F\",      \"Betty\",    \"Castel\",   \"Chase\",        1954,  03,   30,  \"City\",  \"positive\",", 
"  \"F\",      \"Andrea\",   NA,          \"Kumaraswamy\",  2001, 01,   05,  \"Rural\", \"positive\",      ", 
"  \"F\",      \"Caroline\", NA,          \"Wang\",         1988, 12,   11,  \"Rural\", \"negative\",", 
"  \"F\",      \"Trang\",    NA,          \"Nguyen\",       1981, 06,   10,  \"Rural\", \"positive\",", 
"  \"M\",      \"Olivier\" , \"Laurent\",   \"De Bordeaux\",  NA,   NA,   NA,  \"River\", \"positive\",", 
"  \"M\",      \"Mike\",     \"Murphy\",    \"O'Callaghan\",  1969, 04,   12,  \"Rural\", \"negative\",", 
"  \"F\",      \"Cassidy\",  \"Jones\",     \"Davis\",        1980, 07,   02,  \"City\",  \"positive\",", 
"  \"M\",      \"Mohammad\", NA,          \"Ali\",          1942, 01,   17,  \"City\",  \"negative\",", 
"  NA,       \"Jose\",     \"Sanchez\",   \"Lopez\",        1995, 01,   06,  \"City\",  \"negative\",", 
"  \"M\",      \"Abubakar\", NA,          \"Abullahi\",     1960, 01,   01,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Salinas\",   \"Contreras\",    1955, 03,   03,  \"River\", \"positive\"", 
"  )", "", "", "cases_dup <- rbind(cases,", "                   data.frame(", 
"                     gender = c(\"M\", \"F\"),", "           first = c(\"Tony\", \"Maria\"),", 
"           middle = c(\"B.\", \"Contreras\"),", "           last = c(\"Smith\", \"Rodriguez\"),", 
"           yr = c(1970, 1972),", "           mon = c(9, 4),", 
"           day = c(19, 15),", "           district = c(\"River\", \"River\"))", 
"           )", "", "#Create a  factor column", "linelist$source[is.na(linelist$source)] <- \"missing\"", 
"linelist$source <- factor(linelist$source)", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "date_first", code = "", opts = list(label = "\"date_first\"", 
        exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = structure(c("  grade_this({", 
    "    # Automatically pass if .result equal to .solution", 
    "    pass_if_equal()", "    # Default to failing grade with feedback", 
    "    fail()", "  })"), chunk_opts = list(label = "date_first-check")), 
    solution = structure(c("linelist %>%", "  mutate(across(.cols = contains(\"date_\"), .fns = lubridate::ymd))"
    ), chunk_opts = list(label = "date_first-solution")), test_cases = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "2_data_cleaning_dates_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "2_data_cleaning_dates_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 60, exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, stage = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, stage = stage, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "date_first", exercise = TRUE, 
        code = "", out.width.px = 624, out.height.px = 384, params.src = "date_first, exercise = TRUE", 
        fig.num = 0L, exercise.df_print = "paged"), engine = "r"), class = "tutorial_exercise"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_text", label = "rhetorical1", question = structure("When do you think this function would be useful?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_56285", 
    option = "function (value) \n{\n    if (grepl(paste(letters, collapse = \"|\"), value)) {\n        correct(\"\")\n    }\n}", 
    value = "function (value) \n{\n    if (grepl(paste(letters, collapse = \"|\"), value)) {\n        correct(\"\")\n    }\n}", 
    label = NULL, correct = NULL, message = NULL, type = "function"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "rhetorical1-answer", question = "rhetorical1"), 
    loading = structure("<strong>Loading:<\u002fstrong> \nWhen do you think this function would be useful?\n<br/><br/><br/>", html = TRUE, class = c("html", 
    "character")), random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 141308641.934198, options = list(placeholder = "Enter answer here...", 
        trim = TRUE)), class = c("learnr_text", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "sortable_rank", label = "sortable_question", 
    question = structure("Arrange from first to last in terms of date", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_1600f1f", 
        option = c("2020-01-01 17:05:06", "2020-01-02 16:00:00", 
        "2020-02-20 16:00:40", "2020-01-02 16:01:00"), value = structure(c(1577898306, 
        1577980800, 1582214440, 1577980860), class = c("POSIXct", 
        "POSIXt"), tzone = "UTC"), label = structure("2020-01-01 17:05:06\n2020-01-02 16:00:00\n2020-02-20 16:00:40\n2020-01-02 16:01:00", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("Submit Answer", html = TRUE, class = c("html", 
    "character")), try_again = structure("Try Again", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "sortable_question-answer", question = "sortable_question"), 
    loading = structure("<strong>Loading:<\u002fstrong> \nArrange from first to last in terms of date\n<br/><br/><br/>", html = TRUE, class = c("html", 
    "character")), random_answer_order = TRUE, allow_retry = TRUE, 
    seed = 28152902.4868903, options = structure(list(), class = "sortable_options")), class = c("sortable_rank", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz6-1", question = structure("Which of the following functions would convert &#39;Jan 5 1997&#39; to the correct Date format?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_55f36ce", 
    option = "1997-01-05", value = structure(9866, class = "Date"), 
    label = structure("1997-01-05", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_1e881b4", 
    option = "1997-01-05", value = structure(9866, class = "Date"), 
    label = structure("1997-01-05", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_97f5df0", 
    option = "1997-01-05", value = structure(9866, class = "Date"), 
    label = structure("1997-01-05", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Yes, all of these work to convert your date! However, there is a lot more to specify in the base R function as.Date()", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz6-1-answer", question = "quiz6-1"), loading = structure("<strong>Loading:<\u002fstrong> \nWhich of the following functions would convert &#39;Jan 5 1997&#39; to the correct Date format?\n<br/><br/><br/>", html = TRUE, class = c("html", 
"character")), random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 80128360.9626873, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz6-2", question = structure("Which of the following functions be used to convert a column that has the format year, month, day, hour, minute?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_2734c1", 
    option = character(0), value = structure(numeric(0), class = c("POSIXct", 
    "POSIXt"), tzone = "UTC"), label = structure("", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_295e5d2", 
    option = character(0), value = structure(numeric(0), class = c("POSIXct", 
    "POSIXt"), tzone = "UTC"), label = structure("", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_d4f7550", 
    option = character(0), value = structure(numeric(0), class = c("POSIXct", 
    "POSIXt"), tzone = "UTC"), label = structure("", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct, good work", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz6-2-answer", question = "quiz6-2"), loading = structure("<strong>Loading:<\u002fstrong> \nWhich of the following functions be used to convert a column that has the format year, month, day, hour, minute?\n<br/><br/><br/>", html = TRUE, class = c("html", 
"character")), random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1646782274.73316, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-date_convert_subtract-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-date_convert_subtract-code-editor`)), session)
output$`tutorial-exercise-date_convert_subtract-output` <- renderUI({
  `tutorial-exercise-date_convert_subtract-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(global_setup = structure(c("knitr::opts_chunk$set(warning = FALSE, message = FALSE) ", 
"# load packages ----------------------------------------------------------------", 
"library(learnr)", "library(gradethis)", "library(tidyverse)", 
"library(here)", "library(janitor)", "library(rio)", "library(basket) # not sure if we need this", 
"library(etude) # helper functions for gradethis", "library(epikit)", 
"library(linelist)", "library(lubridate)", "library(fastLink)", 
"library(sortable)", "", "# set options for exercises and checking ---------------------------------------", 
"gradethis_setup()", "", "learnr::tutorial_options(exercise.timelimit = 60) ", 
"  #exercise.checker = gradethis::grade_learnr) ", "    # alternatively, submitr::null_code_checker", 
"", "", "# event recorder ---------------------------------------------------------------", 
"# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R", 
"tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises", 
"", "vfun <- submitr::make_basic_validator(NULL, \"hello\") #basket::check_valid", 
"", "new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {", 
"    cat(", "      tutorial_id, ", "      \" (v\", tutorial_version, \"); \",", 
"      format(Sys.time(), \"%Y-%M%-%D %H:%M:%S %Z\"), \"; \",", 
"      user_id, \"; \",", "      event, \"; \",", "      data$label, \"; \",", 
"      data$answers, \"; \",", "      data$code, \"; \",", "      data$correct, \"\\n\", sep = \"\",", 
"      ", "      file = here::here(\"event_records\", \"learnr_basics.txt\"),", 
"      append = TRUE)", "}", "", "options(tutorial.event_recorder = new_recorder)", 
"", "", "# hide non-exercise code chunks ------------------------------------------------", 
"knitr::opts_chunk$set(echo = FALSE)", "", "", "# data prep --------------------------------------------------------------------", 
"linelist_raw <- rio::import(here::here(\"data\", \"linelist_raw.xlsx\"))", 
"linelist <- rio::import(here::here(\"data\", \"linelist_cleaned.rds\"))", 
"malaria_counts <- rio::import(here::here(\"data\", \"malaria_facility_count_data.rds\"))", 
"", "#Incorrectly assign class so we can clean later", "linelist_raw$age <- as.character(linelist_raw$age)", 
"linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)", 
"", "#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later", 
"set.seed(1)", "take_these <- sample(1:nrow(linelist_raw), 500)", 
"", "linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32", 
"", "#Create some dummy df's for pivoting exercises", "df <- data.frame(id = c(\"A\", \"B\", \"C\"),", 
"           obs1_date = c(\"2021-04-23\", \"2021-04-23\", \"2021-04-23\"),", 
"           obs1_status = c(\"Healthy\", \"Healthy\", \"Missing\"),", 
"           obs2_date = c(\"2021-04-24\", \"2021-04-24\", \"2021-04-24\"),", 
"           obs2_status = c(\"Healthy\", \"Healthy\", \"Healthy\"),", 
"           obs3_date = c(\"2021-04-25\", \"2021-04-25\", \"2021-04-25\"),", 
"           obs3_status = c(\"Unwell\", \"Healthy\", \"Healthy\"))", 
"", "fever_followup <- data.frame(patient = 1:10,", "                             observation1_date = Sys.Date() - 21,", 
"                        observation2_date = Sys.Date() - 14,", 
"                        observation3_date = Sys.Date() - 7,", 
"                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))", 
"", "fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation1_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation2_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation3_date >= 39.4, \"High fever\", NA)))", 
"", "", "fill_table_1 <- ", "  tibble::tribble(", "       ~Measurement, ~Facility, ~Cases,", 
"                  1,  \"Hosp 1\",     66,", "                  2,  \"Hosp 1\",     26,", 
"                  3,  \"Hosp 1\",      8,", "                  1,  \"Hosp 2\",     71,", 
"                  2,  \"Hosp 2\",     62,", "                  3,  \"Hosp 2\",     70,", 
"                  1,  \"Hosp 3\",     47,", "                  2,  \"Hosp 3\",     70,", 
"                  3,  \"Hosp 3\",     38,", "       )", "", 
"fill_table_2 <- ", "  tibble::tribble(", "    ~Year, ~Measurement, ~Facility, ~Cases,", 
"     2000,            1,  \"Hosp 4\",     82,", "     2001,            2,  \"Hosp 4\",     87,", 
"     2002,            3,  \"Hosp 4\",     46", "  )", "", "linelist_mini <- linelist %>%                 # start with original linelist", 
"  select(case_id, date_onset, hospital) %>%   # select columns", 
"  head(10)     ", "", "# Make the hospital information dataframe", 
"hosp_info = data.frame(", "  hosp_name     = c(\"central hospital\", \"military\", \"military\", \"port\", \"St. Mark's\", \"ignace\", \"sisters\"),", 
"  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),", 
"  level         = c(\"Tertiary\", \"Secondary\", \"Primary\", \"Secondary\", \"Secondary\", \"Primary\", \"Primary\")", 
")", "", "#Make some ID's and dataframes to join for exercises", 
"patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = \"\")", 
"", "", "patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),", 
"                  linelist %>%", "    select(fever:vomit) %>%", 
"    filter(row_number() %in% 1:10))", "", "patient_dates <- data.frame(id = patient_ID,", 
"                  linelist %>%", "    select(contains(\"date\")) %>%", 
"    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),", 
"  sample(which(!is.na(linelist$date_onset)), 5))))", "", "#Probablistic matching", 
"", "# make datasets", "", "cases <- tribble(", "  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,", 
"  \"M\",     \"Amir\",      NA,          \"Khan\",       1989,  11,   22,   \"River\",", 
"  \"M\",     \"Anthony\",   \"B.\",        \"Smith\",      1970, 09, 19,      \"River\", ", 
"  \"F\",     \"Marialisa\", \"Contreras\", \"Rodrigues\",  1972, 04, 15,      \"River\",", 
"  \"F\",     \"Elizabeth\", \"Casteel\",   \"Chase\",      1954, 03, 03,      \"City\",", 
"  \"M\",     \"Jose\",      \"Sanchez\",   \"Lopez\",      1996, 01, 06,      \"City\",", 
"  \"F\",     \"Cassidy\",   \"Jones\",      \"Davis\",     1980, 07, 20,      \"City\",", 
"  \"M\",     \"Michael\",   \"Murphy\",     \"O'Calaghan\",1969, 04, 12,      \"Rural\", ", 
"  \"M\",     \"Oliver\",    \"Laurent\",    \"De Bordow\" , 1971, 02, 04,     \"River\",", 
"  \"F\",      \"Blessing\",  NA,          \"Adebayo\",   1955,  02, 14,     \"Rural\"", 
")", "", "results <- tribble(", "  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,", 
"  \"M\",      \"Amir\",     NA,          \"Khan\",         1989, 11,   22,  \"River\", \"positive\",", 
"  \"M\",      \"Tony\",   \"B\",         \"Smith\",          1970, 09,   19,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Contreras\", \"Rodriguez\",    1972, 04,   15,  \"Cty\",   \"negative\",", 
"  \"F\",      \"Betty\",    \"Castel\",   \"Chase\",        1954,  03,   30,  \"City\",  \"positive\",", 
"  \"F\",      \"Andrea\",   NA,          \"Kumaraswamy\",  2001, 01,   05,  \"Rural\", \"positive\",      ", 
"  \"F\",      \"Caroline\", NA,          \"Wang\",         1988, 12,   11,  \"Rural\", \"negative\",", 
"  \"F\",      \"Trang\",    NA,          \"Nguyen\",       1981, 06,   10,  \"Rural\", \"positive\",", 
"  \"M\",      \"Olivier\" , \"Laurent\",   \"De Bordeaux\",  NA,   NA,   NA,  \"River\", \"positive\",", 
"  \"M\",      \"Mike\",     \"Murphy\",    \"O'Callaghan\",  1969, 04,   12,  \"Rural\", \"negative\",", 
"  \"F\",      \"Cassidy\",  \"Jones\",     \"Davis\",        1980, 07,   02,  \"City\",  \"positive\",", 
"  \"M\",      \"Mohammad\", NA,          \"Ali\",          1942, 01,   17,  \"City\",  \"negative\",", 
"  NA,       \"Jose\",     \"Sanchez\",   \"Lopez\",        1995, 01,   06,  \"City\",  \"negative\",", 
"  \"M\",      \"Abubakar\", NA,          \"Abullahi\",     1960, 01,   01,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Salinas\",   \"Contreras\",    1955, 03,   03,  \"River\", \"positive\"", 
"  )", "", "", "cases_dup <- rbind(cases,", "                   data.frame(", 
"                     gender = c(\"M\", \"F\"),", "           first = c(\"Tony\", \"Maria\"),", 
"           middle = c(\"B.\", \"Contreras\"),", "           last = c(\"Smith\", \"Rodriguez\"),", 
"           yr = c(1970, 1972),", "           mon = c(9, 4),", 
"           day = c(19, 15),", "           district = c(\"River\", \"River\"))", 
"           )", "", "#Create a  factor column", "linelist$source[is.na(linelist$source)] <- \"missing\"", 
"linelist$source <- factor(linelist$source)", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "date_convert_subtract", code = "", opts = list(
        label = "\"date_convert_subtract\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = structure(c("  grade_this({", "    # Automatically pass if .result equal to .solution", 
    "    pass_if_equal()", "    # Default to failing grade with feedback", 
    "    fail()", "  })"), chunk_opts = list(label = "date_convert_subtract-check")), 
    solution = structure(c("linelist <- linelist %>%", "  mutate(date_infection = ymd(date_infection),", 
    "         date_onset = ymd(date_onset),", "         time_to_symptoms = date_onset - date_infection) %>%", 
    "  select(time_to_symptoms)"), chunk_opts = list(label = "date_convert_subtract-solution")), 
    test_cases = NULL, options = list(eval = FALSE, echo = TRUE, 
        results = "markup", tidy = FALSE, tidy.opts = NULL, collapse = FALSE, 
        prompt = FALSE, comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "2_data_cleaning_dates_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "2_data_cleaning_dates_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 60, exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, stage = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, stage = stage, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "date_convert_subtract", 
        exercise = TRUE, code = "", out.width.px = 624, out.height.px = 384, 
        params.src = "date_convert_subtract, exercise = TRUE", 
        fig.num = 0L, exercise.df_print = "paged"), engine = "r"), class = "tutorial_exercise"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz8-1", question = structure("What class does subtracting two dates create?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_45d4ee5", 
    option = "Character", value = "Character", label = structure("Character", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_302b785", 
    option = "Date", value = "Date", label = structure("Date", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_39cb871", 
    option = "Numeric", value = "Numeric", label = structure("Numeric", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_fdd4a4", 
    option = "Difftime", value = "Difftime", label = structure("Difftime", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz8-1-answer", question = "quiz8-1"), loading = structure("<strong>Loading:<\u002fstrong> \nWhat class does subtracting two dates create?\n<br/><br/><br/>", html = TRUE, class = c("html", 
"character")), random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 128634787.9401, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz8-2", question = structure("What does floor_date() do?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_25ed8b1", 
    option = "Converts a date-time object and rounds it down", 
    value = "Converts a date-time object and rounds it down", 
    label = structure("Converts a date-time object and rounds it down", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_12af559", 
    option = "Converts a date-time object and rounds it up", 
    value = "Converts a date-time object and rounds it up", label = structure("Converts a date-time object and rounds it up", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_afa91e", 
    option = "Converts a numeric object and rounds it down", 
    value = "Converts a numeric object and rounds it down", label = structure("Converts a numeric object and rounds it down", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz8-2-answer", question = "quiz8-2"), loading = structure("<strong>Loading:<\u002fstrong> \nWhat does floor_date() do?\n<br/><br/><br/>", html = TRUE, class = c("html", 
"character")), random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1121977038.47754, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-epiweek_convert-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-epiweek_convert-code-editor`)), session)
output$`tutorial-exercise-epiweek_convert-output` <- renderUI({
  `tutorial-exercise-epiweek_convert-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(global_setup = structure(c("knitr::opts_chunk$set(warning = FALSE, message = FALSE) ", 
"# load packages ----------------------------------------------------------------", 
"library(learnr)", "library(gradethis)", "library(tidyverse)", 
"library(here)", "library(janitor)", "library(rio)", "library(basket) # not sure if we need this", 
"library(etude) # helper functions for gradethis", "library(epikit)", 
"library(linelist)", "library(lubridate)", "library(fastLink)", 
"library(sortable)", "", "# set options for exercises and checking ---------------------------------------", 
"gradethis_setup()", "", "learnr::tutorial_options(exercise.timelimit = 60) ", 
"  #exercise.checker = gradethis::grade_learnr) ", "    # alternatively, submitr::null_code_checker", 
"", "", "# event recorder ---------------------------------------------------------------", 
"# see https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R", 
"tutorial_options(exercise.eval = FALSE)  # pre-evaluate exercises", 
"", "vfun <- submitr::make_basic_validator(NULL, \"hello\") #basket::check_valid", 
"", "new_recorder <- function(tutorial_id, tutorial_version, user_id, event, data) {", 
"    cat(", "      tutorial_id, ", "      \" (v\", tutorial_version, \"); \",", 
"      format(Sys.time(), \"%Y-%M%-%D %H:%M:%S %Z\"), \"; \",", 
"      user_id, \"; \",", "      event, \"; \",", "      data$label, \"; \",", 
"      data$answers, \"; \",", "      data$code, \"; \",", "      data$correct, \"\\n\", sep = \"\",", 
"      ", "      file = here::here(\"event_records\", \"learnr_basics.txt\"),", 
"      append = TRUE)", "}", "", "options(tutorial.event_recorder = new_recorder)", 
"", "", "# hide non-exercise code chunks ------------------------------------------------", 
"knitr::opts_chunk$set(echo = FALSE)", "", "", "# data prep --------------------------------------------------------------------", 
"linelist_raw <- rio::import(here::here(\"data\", \"linelist_raw.xlsx\"))", 
"linelist <- rio::import(here::here(\"data\", \"linelist_cleaned.rds\"))", 
"malaria_counts <- rio::import(here::here(\"data\", \"malaria_facility_count_data.rds\"))", 
"", "#Incorrectly assign class so we can clean later", "linelist_raw$age <- as.character(linelist_raw$age)", 
"linelist_raw$`date onset` <- as.character(linelist_raw$`date onset`)", 
"", "#Going to randomly convert some temperatures to Fahrenheit instead of celcius for an exercise later", 
"set.seed(1)", "take_these <- sample(1:nrow(linelist_raw), 500)", 
"", "linelist_raw$temp[take_these] <- (linelist_raw$temp[take_these] * 9/5) + 32", 
"", "#Create some dummy df's for pivoting exercises", "df <- data.frame(id = c(\"A\", \"B\", \"C\"),", 
"           obs1_date = c(\"2021-04-23\", \"2021-04-23\", \"2021-04-23\"),", 
"           obs1_status = c(\"Healthy\", \"Healthy\", \"Missing\"),", 
"           obs2_date = c(\"2021-04-24\", \"2021-04-24\", \"2021-04-24\"),", 
"           obs2_status = c(\"Healthy\", \"Healthy\", \"Healthy\"),", 
"           obs3_date = c(\"2021-04-25\", \"2021-04-25\", \"2021-04-25\"),", 
"           obs3_status = c(\"Unwell\", \"Healthy\", \"Healthy\"))", 
"", "fever_followup <- data.frame(patient = 1:10,", "                             observation1_date = Sys.Date() - 21,", 
"                        observation2_date = Sys.Date() - 14,", 
"                        observation3_date = Sys.Date() - 7,", 
"                        observation1_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation2_temp = sample(seq(35, 45, by = 0.1), 10, replace = T),", 
"                        observation3_temp = sample(seq(35, 45, by = 0.1), 10, replace = T))", 
"", "fever_followup$observation1_fever <- ifelse(fever_followup$observation1_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation1_date >= 38 & fever_followup$observation1_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation1_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation2_fever <- ifelse(fever_followup$observation2_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation2_date >= 38 & fever_followup$observation2_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation2_date >= 39.4, \"High fever\", NA)))", 
"fever_followup$observation3_fever <- ifelse(fever_followup$observation3_date < 38, \"No fever\",", 
"                              ifelse(fever_followup$observation3_date >= 38 & fever_followup$observation3_date< 39.4, \"Mild fever\",", 
"                                     ifelse(fever_followup$observation3_date >= 39.4, \"High fever\", NA)))", 
"", "", "fill_table_1 <- ", "  tibble::tribble(", "       ~Measurement, ~Facility, ~Cases,", 
"                  1,  \"Hosp 1\",     66,", "                  2,  \"Hosp 1\",     26,", 
"                  3,  \"Hosp 1\",      8,", "                  1,  \"Hosp 2\",     71,", 
"                  2,  \"Hosp 2\",     62,", "                  3,  \"Hosp 2\",     70,", 
"                  1,  \"Hosp 3\",     47,", "                  2,  \"Hosp 3\",     70,", 
"                  3,  \"Hosp 3\",     38,", "       )", "", 
"fill_table_2 <- ", "  tibble::tribble(", "    ~Year, ~Measurement, ~Facility, ~Cases,", 
"     2000,            1,  \"Hosp 4\",     82,", "     2001,            2,  \"Hosp 4\",     87,", 
"     2002,            3,  \"Hosp 4\",     46", "  )", "", "linelist_mini <- linelist %>%                 # start with original linelist", 
"  select(case_id, date_onset, hospital) %>%   # select columns", 
"  head(10)     ", "", "# Make the hospital information dataframe", 
"hosp_info = data.frame(", "  hosp_name     = c(\"central hospital\", \"military\", \"military\", \"port\", \"St. Mark's\", \"ignace\", \"sisters\"),", 
"  catchment_pop = c(1950280, 40500, 10000, 50280, 12000, 5000, 4200),", 
"  level         = c(\"Tertiary\", \"Secondary\", \"Primary\", \"Secondary\", \"Secondary\", \"Primary\", \"Primary\")", 
")", "", "#Make some ID's and dataframes to join for exercises", 
"patient_ID <- apply(sapply(1:10, function(x) sample(c(LETTERS, 0:9), 10, replace = T)), 2, paste0, collapse = \"\")", 
"", "", "patient_symptoms <- data.frame(patient_id = sample(patient_ID, 10),", 
"                  linelist %>%", "    select(fever:vomit) %>%", 
"    filter(row_number() %in% 1:10))", "", "patient_dates <- data.frame(id = patient_ID,", 
"                  linelist %>%", "    select(contains(\"date\")) %>%", 
"    filter(row_number() %in% c(sample(which(is.na(linelist$date_onset)), 5),", 
"  sample(which(!is.na(linelist$date_onset)), 5))))", "", "#Probablistic matching", 
"", "# make datasets", "", "cases <- tribble(", "  ~gender, ~first,      ~middle,     ~last,        ~yr,   ~mon, ~day, ~district,", 
"  \"M\",     \"Amir\",      NA,          \"Khan\",       1989,  11,   22,   \"River\",", 
"  \"M\",     \"Anthony\",   \"B.\",        \"Smith\",      1970, 09, 19,      \"River\", ", 
"  \"F\",     \"Marialisa\", \"Contreras\", \"Rodrigues\",  1972, 04, 15,      \"River\",", 
"  \"F\",     \"Elizabeth\", \"Casteel\",   \"Chase\",      1954, 03, 03,      \"City\",", 
"  \"M\",     \"Jose\",      \"Sanchez\",   \"Lopez\",      1996, 01, 06,      \"City\",", 
"  \"F\",     \"Cassidy\",   \"Jones\",      \"Davis\",     1980, 07, 20,      \"City\",", 
"  \"M\",     \"Michael\",   \"Murphy\",     \"O'Calaghan\",1969, 04, 12,      \"Rural\", ", 
"  \"M\",     \"Oliver\",    \"Laurent\",    \"De Bordow\" , 1971, 02, 04,     \"River\",", 
"  \"F\",      \"Blessing\",  NA,          \"Adebayo\",   1955,  02, 14,     \"Rural\"", 
")", "", "results <- tribble(", "  ~gender,  ~first,     ~middle,     ~last,          ~yr, ~mon, ~day, ~district, ~result,", 
"  \"M\",      \"Amir\",     NA,          \"Khan\",         1989, 11,   22,  \"River\", \"positive\",", 
"  \"M\",      \"Tony\",   \"B\",         \"Smith\",          1970, 09,   19,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Contreras\", \"Rodriguez\",    1972, 04,   15,  \"Cty\",   \"negative\",", 
"  \"F\",      \"Betty\",    \"Castel\",   \"Chase\",        1954,  03,   30,  \"City\",  \"positive\",", 
"  \"F\",      \"Andrea\",   NA,          \"Kumaraswamy\",  2001, 01,   05,  \"Rural\", \"positive\",      ", 
"  \"F\",      \"Caroline\", NA,          \"Wang\",         1988, 12,   11,  \"Rural\", \"negative\",", 
"  \"F\",      \"Trang\",    NA,          \"Nguyen\",       1981, 06,   10,  \"Rural\", \"positive\",", 
"  \"M\",      \"Olivier\" , \"Laurent\",   \"De Bordeaux\",  NA,   NA,   NA,  \"River\", \"positive\",", 
"  \"M\",      \"Mike\",     \"Murphy\",    \"O'Callaghan\",  1969, 04,   12,  \"Rural\", \"negative\",", 
"  \"F\",      \"Cassidy\",  \"Jones\",     \"Davis\",        1980, 07,   02,  \"City\",  \"positive\",", 
"  \"M\",      \"Mohammad\", NA,          \"Ali\",          1942, 01,   17,  \"City\",  \"negative\",", 
"  NA,       \"Jose\",     \"Sanchez\",   \"Lopez\",        1995, 01,   06,  \"City\",  \"negative\",", 
"  \"M\",      \"Abubakar\", NA,          \"Abullahi\",     1960, 01,   01,  \"River\", \"positive\",", 
"  \"F\",      \"Maria\",    \"Salinas\",   \"Contreras\",    1955, 03,   03,  \"River\", \"positive\"", 
"  )", "", "", "cases_dup <- rbind(cases,", "                   data.frame(", 
"                     gender = c(\"M\", \"F\"),", "           first = c(\"Tony\", \"Maria\"),", 
"           middle = c(\"B.\", \"Contreras\"),", "           last = c(\"Smith\", \"Rodriguez\"),", 
"           yr = c(1970, 1972),", "           mon = c(9, 4),", 
"           day = c(19, 15),", "           district = c(\"River\", \"River\"))", 
"           )", "", "#Create a  factor column", "linelist$source[is.na(linelist$source)] <- \"missing\"", 
"linelist$source <- factor(linelist$source)", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "epiweek_convert", code = "linelist %>%\n  drop_na(date_onset) %>%\n  mutate(date_infection = ymd(date_infection),\n         date_onset = ymd(date_onset),\n         time_to_symptoms = as.numeric(date_onset - date_infection)) #Add in additonal arguments within this mutate", 
        opts = list(label = "\"epiweek_convert\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = structure(c("  grade_this({", "    # Automatically pass if .result equal to .solution", 
    "    pass_if_equal()", "    # Default to failing grade with feedback", 
    "    fail(message = \"Look back at previous exercises, you have already strung together several if/if_else statements to create new columns.\")", 
    "  })"), chunk_opts = list(label = "epiweek_convert-check")), 
    solution = structure(c("linelist %>%", "  drop_na(date_onset) %>%", 
    "  mutate(date_infection = ymd(date_infection),", "         date_onset = ymd(date_onset),", 
    "         time_to_symptoms = as.numeric(date_onset - date_infection),", 
    "         estimated_or_recorded = if_else(", "           is.na(date_infection),", 
    "           \"estimated\",", "           \"recorded\"),", 
    "         date_infection_updated = if_else(", "           estimated_or_recorded == \"estimated\",", 
    "           date_onset - days(median(time_to_symptoms, na.rm = T)),", 
    "           date_infection", "         ),", "         week_infection = epiweek(date_infection_updated))"
    ), chunk_opts = list(label = "epiweek_convert-solution")), 
    test_cases = NULL, options = list(eval = FALSE, echo = TRUE, 
        results = "markup", tidy = FALSE, tidy.opts = NULL, collapse = FALSE, 
        prompt = FALSE, comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "2_data_cleaning_dates_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "2_data_cleaning_dates_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, exercise.timelimit = 60, exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, stage = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, stage = stage, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "epiweek_convert", exercise = TRUE, 
        code = c("linelist %>%", "  drop_na(date_onset) %>%", 
        "  mutate(date_infection = ymd(date_infection),", "         date_onset = ymd(date_onset),", 
        "         time_to_symptoms = as.numeric(date_onset - date_infection)) #Add in additonal arguments within this mutate"
        ), out.width.px = 624, out.height.px = 384, params.src = "epiweek_convert, exercise = TRUE", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"), class = "tutorial_exercise"))
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.11"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1.9019"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["i18n"]},{"type":"character","attributes":{},"value":["1.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/i18n"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["i18next.min.js","tutorial-i18n-init.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script id=\"i18n-cstm-trns\" type=\"application/json\">{\"language\":\"en\",\"resources\":{\"en\":{\"translation\":{\"button\":{\"runcode\":\"Run Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Hint\",\"hint_plural\":\"Hints\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Next Hint\",\"hintprev\":\"Previous Hint\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copy to Clipboard\",\"startover\":\"Start Over\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continue\",\"submitanswer\":\"Submit Answer\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Previous Topic\",\"nexttopic\":\"Next Topic\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Try Again\"},\"text\":{\"startover\":\"Start Over\",\"areyousure\":\"Are you sure you want to start over? (all exercise progress will be reset)\",\"youmustcomplete\":\"You must complete the\",\"exercise\":\"exercise\",\"exercise_plural\":\"exercises\",\"inthissection\":\"in this section before continuing.\",\"code\":\"Code\",\"enginecap\":\"{{engine}} $t(text.code)\",\"quiz\":\"Quiz\",\"blank\":\"blank\",\"blank_plural\":\"blanks\",\"exercisecontainsblank\":\"This exercise contains {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Please replace {{blank}} with valid code.\",\"unparsable\":\"It looks like this might not be valid R code. R cannot determine how to turn your text into a complete command. You may have forgotten to fill in a blank, to remove an underscore, to include a comma between arguments, or to close an opening <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> or <code>{<\\/code> with a matching <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> or <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>It looks like your R code contains specially formatted quotation marks or &quot;curly&quot; quotes (<code>{{character}}<\\/code>) around character strings, making your code invalid. R requires character values to be contained in straight quotation marks (<code>&quot;<\\/code> or <code>'<\\/code>).<\\/p> {{code}} <p>Don't worry, this is a common source of errors when you copy code from another app that applies its own formatting to text. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. Try deleting the special character from your code and retyping it manually.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"and\":\"and\",\"or\":\"or\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"fr\":{\"translation\":{\"button\":{\"runcode\":\"Lancer le Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Indication\",\"hint_plural\":\"Indications\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Indication Suivante\",\"hintprev\":\"Indication Précédente\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copier dans le Presse-papier\",\"startover\":\"Recommencer\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuer\",\"submitanswer\":\"Soumettre\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Chapitre Précédent\",\"nexttopic\":\"Chapitre Suivant\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Réessayer\"},\"text\":{\"startover\":\"Recommencer\",\"areyousure\":\"Êtes-vous certains de vouloir recommencer? (La progression sera remise à zéro)\",\"youmustcomplete\":\"Vous devez d'abord compléter\",\"exercise\":\"l'exercice\",\"exercise_plural\":\"des exercices\",\"inthissection\":\"de cette section avec de continuer.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"et\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"es\":{\"translation\":{\"button\":{\"runcode\":\"Ejecutar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Pista\",\"hint_plural\":\"Pistas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Siguiente pista\",\"hintprev\":\"Pista anterior\",\"solution\":\"Solución\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar al portapapeles\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar respuesta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tema anterior\",\"nexttopic\":\"Tema siguiente\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Volver a intentar\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"¿De verdad quieres empezar de nuevo? (todo el progreso del ejercicio se perderá)\",\"youmustcomplete\":\"Debes completar\",\"exercise\":\"el ejercicio\",\"exercise_plural\":\"los ejercicios\",\"inthissection\":\"en esta sección antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Cuestionario\",\"and\":\"y\",\"or\":\"o\",\"oxfordcomma\":\"\"}}},\"pt\":{\"translation\":{\"button\":{\"runcode\":\"Executar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Dica\",\"hint_plural\":\"Dicas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Próxima dica\",\"hintprev\":\"Dica anterior\",\"solution\":\"Solução\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar para a área de transferência\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar resposta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tópico anterior\",\"nexttopic\":\"Próximo tópico\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tentar novamente\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"Tem certeza que deseja começar novamente? (todo o progresso feito será perdido)\",\"youmustcomplete\":\"Você deve completar\",\"exercise\":\"o exercício\",\"exercise_plural\":\"os exercícios\",\"inthissection\":\"nesta seção antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"e\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"tr\":{\"translation\":{\"button\":{\"runcode\":\"Çalistirma Kodu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Ipucu\",\"hint_plural\":\"Ipuçlari\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Sonraki Ipucu\",\"hintprev\":\"Önceki Ipucu\",\"solution\":\"Çözüm\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Pano'ya Kopyala\",\"startover\":\"Bastan Baslamak\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Devam et\",\"submitanswer\":\"Cevabi onayla\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Önceki Konu\",\"nexttopic\":\"Sonraki Konu\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tekrar Deneyin\"},\"text\":{\"startover\":\"Bastan Baslamak\",\"areyousure\":\"Bastan baslamak istediginizden emin misiniz? (tüm egzersiz ilerlemesi kaybolacak)\",\"youmustcomplete\":\"Tamamlamalisin\",\"exercise\":\"egzersiz\",\"exercise_plural\":\"egzersizler\",\"inthissection\":\"devam etmeden önce bu bölümde\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Sinav\",\"oxfordcomma\":\"\"}}},\"emo\":{\"translation\":{\"button\":{\"runcode\":\"<U+0001F3C3>\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"<U+0001F4A1>\",\"hint_plural\":\"$t(button.hint)\",\"hinttitle\":\"$t(button.hint)\",\"solution\":\"<U+0001F3AF>\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"<U+0001F4CB>\",\"startover\":\"<U+23EE>\",\"startovertitle\":\"Start Over\",\"continue\":\"<U+2705>\",\"submitanswer\":\"<U+0001F197>\",\"submitanswertitle\":\"Submit Answer\",\"previoustopic\":\"<U+2B05>\",\"nexttopic\":\"<U+27A1>\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"<U+0001F501>\"},\"text\":{\"startover\":\"<U+23EE>\",\"areyousure\":\"<U+0001F914>\",\"youmustcomplete\":\"<U+26A0><U+FE0F> <U+0001F449> <U+0001F9D1><U+200D><U+0001F4BB>\",\"exercise\":\"\",\"exercise_plural\":\"\",\"inthissection\":\"\",\"code\":\"<U+0001F4BB>\",\"enginecap\":\"$t(text.code) {{engine}}\",\"oxfordcomma\":\"\"}}},\"eu\":{\"translation\":{\"button\":{\"runcode\":\"Kodea egikaritu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Laguntza\",\"hint_plural\":\"Laguntza\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Aurreko laguntza\",\"hintprev\":\"Hurrengo laguntza\",\"solution\":\"Ebazpena\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Arbelean kopiatu\",\"startover\":\"Berrabiarazi\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Jarraitu\",\"submitanswer\":\"Erantzuna bidali\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Aurreko atala\",\"nexttopic\":\"Hurrengo atala\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Berriro saiatu\"},\"text\":{\"startover\":\"Berrabiarazi\",\"areyousure\":\"Berriro hasi nahi duzu? (egindako lana galdu egingo da)\",\"youmustcomplete\":\"Aurrera egin baino lehen atal honetako\",\"exercise\":\"ariketa egin behar duzu.\",\"exercise_plural\":\"ariketak egin behar dituzu.\",\"inthissection\":\"\",\"code\":\"Kodea\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Galdetegia\",\"oxfordcomma\":\"\"}}},\"de\":{\"translation\":{\"button\":{\"runcode\":\"Code ausführen\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Tipp\",\"hint_plural\":\"Tipps\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Nächster Tipp\",\"hintprev\":\"Vorheriger Tipp\",\"solution\":\"Lösung\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"In die Zwischenablage kopieren\",\"startover\":\"Neustart\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Weiter\",\"submitanswer\":\"Antwort einreichen\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Vorheriges Kapitel\",\"nexttopic\":\"Nächstes Kapitel\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Nochmal versuchen\"},\"text\":{\"startover\":\"Neustart\",\"areyousure\":\"Bist du sicher, dass du neustarten willst? (der gesamte Lernfortschritt wird gelöscht)\",\"youmustcomplete\":\"Vervollstädinge\",\"exercise\":\"die Übung\",\"exercise_plural\":\"die Übungen\",\"inthissection\":\"in diesem Kapitel, bevor du fortfährst.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"Lücke\",\"blank_plural\":\"Lücken\",\"pleasereplaceblank\":\"Bitte ersetze {{blank}} mit gültigem Code.\",\"unparsable\":\"Dies scheint kein gültiger R Code zu sein. R kann deinen Text nicht in einen gültigen Befehl übersetzen. Du hast vielleicht vergessen, die Lücke zu füllen, einen Unterstrich zu entfernen, ein Komma zwischen Argumente zu setzen oder ein eröffnendes <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> oder <code>{<\\/code> mit einem zugehörigen <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> oder <code>}<\\/code> zu schließen.\\n\",\"and\":\"und\",\"or\":\"oder\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"ko\":{\"translation\":{\"button\":{\"runcode\":\"<U+CF54><U+B4DC> <U+C2E4><U+D589>\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"<U+D78C><U+D2B8>\",\"hint_plural\":\"<U+D78C><U+D2B8><U+B4E4>\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"<U+B2E4><U+C74C> <U+D78C><U+D2B8>\",\"hintprev\":\"<U+C774><U+C804> <U+D78C><U+D2B8>\",\"solution\":\"<U+C194><U+B8E8><U+C158>\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"<U+D074><U+B9BD><U+BCF4><U+B4DC><U+C5D0> <U+BCF5><U+C0AC>\",\"startover\":\"<U+C7AC><U+D559><U+C2B5>\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"<U+B2E4><U+C74C> <U+D559><U+C2B5><U+C73C><U+B85C>\",\"submitanswer\":\"<U+C815><U+B2F5> <U+C81C><U+CD9C>\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"<U+C774><U+C804> <U+D1A0><U+D53D>\",\"nexttopic\":\"<U+B2E4><U+C74C> <U+D1A0><U+D53D>\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"<U+C7AC><U+C2DC><U+B3C4>\"},\"text\":{\"startover\":\"<U+C7AC><U+D559><U+C2B5>\",\"areyousure\":\"<U+B2E4><U+C2DC> <U+C2DC><U+C791> <U+D558><U+C2DC><U+ACA0><U+C2B5><U+B2C8><U+AE4C>? (<U+BAA8><U+B4E0> <U+C608><U+C81C><U+C758> <U+C9C4><U+D589> <U+C815><U+BCF4><U+AC00> <U+C7AC><U+C124><U+C815><U+B429><U+B2C8><U+B2E4>)\",\"youmustcomplete\":\"<U+B2F9><U+C2E0><U+C740> <U+C644><U+B8CC><U+D574><U+C57C> <U+D569><U+B2C8><U+B2E4>\",\"exercise\":\"<U+C5F0><U+C2B5><U+BB38><U+C81C>\",\"exercise_plural\":\"<U+C5F0><U+C2B5><U+BB38><U+C81C><U+B4E4>\",\"inthissection\":\"<U+C774> <U+C139><U+C158><U+C744> <U+C2E4><U+D589><U+D558><U+AE30> <U+C804><U+C5D0>\",\"code\":\"<U+CF54><U+B4DC>\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"<U+D034><U+C988>\",\"blank\":\"<U+ACF5><U+BC31>\",\"blank_plural\":\"<U+ACF5><U+BC31><U+B4E4>\",\"exercisecontainsblank\":\"<U+C774> <U+C5F0><U+C2B5><U+BB38><U+C81C><U+C5D0><U+B294> {{count}}<U+AC1C><U+C758> $t(text.blank)<U+C774> <U+D3EC><U+D568><U+B418><U+C5B4> <U+C788><U+C2B5><U+B2C8><U+B2E4>.\",\"pleasereplaceblank\":\"{{blank}}<U+B97C> <U+C720><U+D6A8><U+D55C> <U+CF54><U+B4DC><U+B85C> <U+BC14><U+AFB8><U+C2ED><U+C2DC><U+C624>.\",\"unparsable\":\"<U+C774><U+AC83><U+C740> <U+C720><U+D6A8><U+D55C> R <U+CF54><U+B4DC><U+AC00> <U+C544><U+B2D0> <U+C218> <U+C788><U+C2B5><U+B2C8><U+B2E4>. R<U+C740> <U+D14D><U+C2A4><U+D2B8><U+B97C> <U+C644><U+C804><U+D55C> <U+BA85><U+B839><U+C73C><U+B85C> <U+BCC0><U+D658><U+D558><U+B294> <U+BC29><U+BC95><U+C744> <U+ACB0><U+C815><U+D560> <U+C218> <U+C5C6><U+C2B5><U+B2C8><U+B2E4>. <U+B2F9><U+C2E0><U+C740> <U+ACF5><U+BC31><U+C774><U+B098> <U+BC11><U+C904><U+C744> <U+B300><U+CCB4><U+D558><U+C5EC> <U+CC44><U+C6B0><U+AE30>, <U+C778><U+C218><U+B97C> <U+CEF4><U+B9C8><U+B85C> <U+AD6C><U+BD84><U+D558><U+AE30>, <U+B610><U+B294> <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> , <code>{<\\/code><U+B85C> <U+C2DC><U+C791><U+D558><U+B294> <U+AD6C><U+BB38><U+C744> <U+B2EB><U+B294> <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>, <code>}<\\/code><U+C744> <U+C78A><U+C5C8><U+C744> <U+C218><U+B3C4> <U+C788><U+C2B5><U+B2C8><U+B2E4>.\\n\",\"and\":\"<U+ADF8><U+B9AC><U+ACE0>\",\"or\":\"<U+D639><U+C740>\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}}}}<\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1.9019"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1.9019"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9019"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134]}},"value":[{"type":"character","attributes":{},"value":["adagio","ade4","assertthat","backports","base","basket","broom","bslib","cellranger","checkmate","cli","codetools","colorspace","compiler","crayon","curl","data.table","datasets","DBI","dbplyr","digest","doParallel","dplyr","ellipsis","epikit","etude","evaluate","FactoClass","fansi","farver","fastLink","fastmap","forcats","foreach","foreign","fs","generics","GenSA","ggforce","ggplot2","ggraph","ggrepel","glue","gradethis","graphics","graphlayouts","grDevices","grid","gridExtra","gtable","gtools","haven","here","highr","hms","htmltools","htmlwidgets","httpuv","httr","igraph","iterators","itertools","janitor","jquerylib","jsonlite","KernSmooth","knitr","labeling","later","lattice","learnr","lifecycle","linelist","lpSolve","lubridate","magrittr","markdown","MASS","Matrix","methods","mime","modelr","munsell","openxlsx","parallel","pillar","pkgconfig","plotrix","polyclip","promises","purrr","R6","RColorBrewer","Rcpp","readr","readxl","reprex","rio","rlang","rmarkdown","rprojroot","rstudioapi","rvest","sass","scales","scatterplot3d","shiny","snakecase","sortable","stats","stringdist","stringi","stringr","submitr","tibble","tidygraph","tidyr","tidyselect","tidyverse","tools","tweenr","tzdb","utf8","utils","vctrs","viridis","viridisLite","withr","xfun","xml2","xtable","yaml","zip","zoo"]},{"type":"character","attributes":{},"value":["0.8.4","1.7-18","0.2.1","1.4.1","4.0.4","0.10.11","0.7.12","0.3.1","1.1.0","2.0.0","3.2.0","0.2-18","2.0-3","4.0.4","1.5.0","4.3.2","1.14.2","4.0.4","1.1.2","2.1.1","0.6.29","1.0.17","1.0.8","0.3.2","0.1.2","0.3.0.9001","0.15","1.2.7","1.0.2","2.1.0","0.6.0","1.1.0","0.5.1","1.5.2","0.8-82","1.5.2","0.1.2","1.1.7","0.3.3","3.3.5","2.0.5","0.9.1","1.6.2","0.2.4.9000","4.0.4","0.8.0","4.0.4","4.0.4","2.3","0.3.0","3.9.2","2.4.3","1.0.1","0.9","1.1.1","0.5.2","1.5.4","1.6.5","1.4.2","1.2.11","1.0.14","0.1-3","2.1.0","0.1.4","1.8.0","2.23-20","1.37","0.4.2","1.3.0","0.20-45","0.10.1.9019","1.0.1","0.0.40.9000","5.6.15","1.8.0","2.0.2","1.1","7.3-55","1.4-0","4.0.4","0.12","0.1.8","0.5.0","4.2.5","4.0.4","1.7.0","2.0.3","3.8-2","1.10-0","1.2.0.1","0.3.4","2.5.1","1.1-2","1.0.8","2.1.2","1.3.1","2.0.1","0.5.29","1.0.1","2.11","2.0.2","0.13","1.0.2","0.4.0","1.1.1","0.3-41","1.7.1","0.11.0","0.4.5","4.0.4","0.9.8","1.7.6","1.4.0","0.3.0.9000","3.1.6","1.2.0","1.2.0","1.1.2","1.3.1","4.0.4","1.0.2","0.2.0","1.2.2","4.0.4","0.3.8","0.6.2","0.4.0","2.4.3","0.29","1.3.3","1.8-4","2.2.1","2.2.0","1.8-9"]}]}]}
</script>
<!--/html_preserve-->
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Data cleaning</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->



<!-- Build Tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
